function displayMessage(text, sender) {
    const chatBox = document.getElementById('chat-box');
    if (!chatBox) return;
    let className = sender === 'bot' ? 'bot-message' : 'user-message';
    const msgElem = createMessage(text, className);
    chatBox.appendChild(msgElem);
    chatBox.scrollTop = chatBox.scrollHeight;
}
const responseHistory = new Map();
const MAX_HISTORY_PER_TERM = 100;
const STAR_EMOJI = 'T Singularity ';

const responseDatabase = {
    "彗星（すいせい）": [
        "☄️ 彗星は恒星に近づくと尾を発達させる氷天体！SIU 2Dでは「天体作成」メニューで作成可能",
        "💫 彗星の標準質量：0.1～10単位。300質量以上は自動的に氷惑星体に進化",
        "🌠 尾は常に進行方向と反対を向く―恒星風の物理シミュレーションが正確に再現",
        "🚀 作成時マウスドラッグで初速設定→予測軌道を確認",
        "❄️ 高温恒星に接近すると溶解→50回通過後、小惑星に変化",
        "⏱️ 時間加速モード(100000x)で数秒で軌道一周を観測",
        "🎯 複数彗星の恒星周回システム作成：「C」キーで作成メニュー",
        "📏 核半径計算式：R = 0.1 * ∛(質量) 例：質量8→半径約0.2単位（編集パネル可視）",
        "🔥 速度>5単位/秒で尾が長くなる―劇的ビジュアル効果",
        "🌌 高画質モードで尾が3層表示：塵(黄)・電離ガス(青)・ナトリウム(橙)",
        "🔄 巨大惑星を「重力スリング」に活用→接近軌道で方向転換",
        "⛰️ 消耗彗星は小惑星クラス2（氷質）に変化→天体履歴で遷移確認",
        "💧 尾の発生点を編集パネルの基本温度(-50°C以上)で調整",
        "📊 物理データ：密度=0.5g/cm³ アルベド=0.04（Shift+Eで詳細統計表示）",
        "✨ 新規彗星の活動期間：ゲーム時間で約100万年→宇宙タイムラインで観測",
        "🎯 完璧な軌道には初速を重力線と垂直に―矢印ガイドあり",
        "🌡️ 尾の温度変化：核近く(1500°C) → 中間(500°C) → 先端(100°C)（熱ゾーン表示時）",
        "🔄 惑星に捕獲される可能性→仮想木星システムで彗星衛星を実験",
        "⏳ 天体時間パネル（編集時「T」）で恒星通過残り回数を確認",
        "📈 軌道離心率>0.9でより複雑な軌道に―速度ベクトルで調整",
        "🌠 質量損失シミュレーション：1周あたり約0.01%を昇華で損失",
        "🔭 連星系では混沌とした軌道に―接近した二重星＋彗星で実験",
        "⚠️ 注意：惑星衝突コースの彗星は大半が蒸発",
        "💧 蒸発時の水資源が惑星リソースに加算→惑星パネルで確認",
        "🌟 最適結果：氷惑星体を「小天体」メニューで-100°C～-50°Cで作成"
    ],
    
    "ブラックホール": [
        "🕳️ 最小質量：1兆(1e12)単位―「特殊天体」メニューで作成",
        "🌀 半径計算式：R = ∛(質量)/1000（シュバルツシルト半径を簡略化）",
        "💥 物質投下で成長を観測→星雲や恒星を近接投入",
        "⏳ ホーキング放射で質量損失→10^67年で蒸発（加速シミュレーション）",
        "📡 降着円盤は高温→「熱ゾーン」(T)で5000°C以上を可視化",
        "⚡ 潮汐力：F = (G * M * m) / r³ * Δr―近接物体が伸長（高画質で効果表示）",
        "🌌 500垓(10^23)質量以上でクエーサー化→噴出エネルギーを確認",
        "🔭 安全距離：半径の10倍―圏内物体は即時吸収",
        "🔄 重力スリング効果で高エネルギー軌道を効率的に生成",
        "💫 連星系で重力波発生→設定>物理>相対論的効果で有効化",
        "⏱️ 事象の地平面で1秒≒外部100年（時間加速で観測）",
        "📈 蒸発時間は天体時間パネル（編集時「T」）に表示",
        "🌠 ブラックホール融合：2個接近＋時間加速→衝突で閃光",
        "⚠️ 5倍半径圏内でスパゲッティ化→設定>グラフィック>高画質で効果",
        "🔢 太陽質量100万倍の半径：R≈2.95*(M/1e6)km（簡易単位使用）",
        "💥 1e60質量でホワイトホールに変化→物質投下継続で遷移観測",
        "🌡️ 降着円盤温度：編集パネルで調整（標準100万°C）",
        "🌀 スピンは詳細設定（「相対論的特性」クリック）で調整→円盤に影響",
        "📏 事象の地平面直径：常に表示半径の2倍",
        "⚠️ 高密度システムでは恒星を急速に飲み込む→タイムラインで監視",
        "🔭 観測モード(O)で重力レンズ効果―背後恒星の光歪み",
        "💫 クエーサー（進化段階）はエネルギー噴出→編集パネルで方向制御",
        "⏳ 超大質量BHの蒸発時間：現在の宇宙年齢を超越",
        "🌌 実験：ブラックホール＋恒星の連星で物質転送をリアルタイム観測",
        "✨ 没入感：設定>オーディオで環境音楽「特異点」を再生"
    ],
    
    "重力": [
        "⚖️ 重力定数の全局調整：0～500%（メニュー>物理>重力定数）",
        "📏 標準重力定数G：6.67430e-11 N·m²/kg²―代替宇宙シミュレーション用に変更可",
        "🌀 ブラックホールは相対論的効果のため重力乗数1000倍で固定",
        "🪐 潮汐力：Δg = (2GM/R³) * Δr―近接衛星の変形を引き起こす（高画質で可視）",
        "📈 重力+100%ごとにシステム速度～15%上昇―高速シミュレーションに有用",
        "🌌 重力波：設定>物理>高度効果で有効化→波紋として可視",
        "🔄 最適軌道速度：v = √(GM/r)―作成時の矢印ガイドで表示",
        "⚙️ 星雲シミュレーション：10-50%／高密度恒星系：200-500%に設定",
        "🔭 重力レンズ効果：ブラックホール近傍で可視→グラフィック>特殊効果で有効",
        "📊 最大安定数：0.5 * √N 天体（例：100天体→約7安定）―超過でカオス発生",
        "⏳ 高重力下で恒星進化加速―強重力場では寿命短縮",
        "🌠 衝突合体閾値：運動エネルギー < 重力位置エネルギー（Ec < |Ep|）",
        "🧮 実装公式：F = G * m1 * m2 / r²―「力表示」(F3)で検証可能",
        "🔢 重力2倍化：Gを100%増加 または 質量を100%増加",
        "⚠️ >300%で50天体以上システムが不安定化―注意して使用",
        "🌍 表面重力：g = GM/R²―岩石天体の惑星パネルで表示",
        "💫 Verlet積分法で精密軌道計算→物理設定で「完全精度」有効化",
        "📈 大質量天体で自転に影響―恒星接近惑星は潮汐固定される",
        "🌀 強重力場で時間遅延→異なる高度の時計比較で観測可能",
        "⚡ 暗黒物質シミュレーション：可視質量なしに重力30-50%増加",
        "🔭 数値精度：大質量近傍で向上―適応座標系を採用",
        "🌌 時空曲率：コンパクト天体近くで視覚化→設定>グラフィックで有効",
        "📏 ロッシュ限界自動計算―圏内衛星は破砕（「危険領域表示」で可視）",
        "💥 衝突時の解放エネルギー：E ∝ M²/R（直撃時）",
        "✨ 安定軌道のコツ：初速を局所脱出速度の≈80%に設定"
    ],
    
    "恒星": [
        "⭐ 最小質量：1500万単位―「恒星天体」メニューで作成",
        "🌞 太陽相当：質量～1.989e30kg（ゲーム内1太陽質量）",
        "🌈 温度別色：青(>30,000K)・白(10,000K)・黄(6,000K)・赤(<3,500K)―パネル調整",
        "💥 20太陽質量以上で超新星爆発→設定で「恒星進化」有効化",
        "⏳ 寿命：t ≈ 10^10 * (M/M☉)^-2.5年―天体時間パネル(編集時T)で表示",
        "🔄 近接連星系作成→魅惑的軌道を観測",
        "🔭 変光星：光度変化―「恒星特性」で振幅制御",
        "🌡️ ハビタブルゾーン：d = √(光度/太陽光度) AU―選択時緑リング表示",
        "💫 核融合シミュレーション：H→He 効率0.7%(E=mc²)→光度・寿命に影響",
        "📊 進化：赤色矮星→白色矮星／中型星→赤色巨星／大質量星→超新星→ブラックホール",
        "⚙️ 調整可能：質量・温度・自転・金属量・磁気活動",
        "✨ 中性子星：>1.4太陽質量＋崩壊が必要→超新星経由で作成",
        "🌌 星団：狭域に複数恒星作成（「複合システム」メニュー）",
        "🧪 重力定数変更で進化への影響を検証（メニュー>物理>定数）",
        "🔢 光度：L ∝ M^3.5―質量2倍で光度約11倍",
        "⚠️ 超高質量星(>100太陽質量)は不安定―分裂/早期爆発の可能性",
        "🌠 Tタウリ星（若い星）：質量放出―高画質モードで紅炎として可視",
        "💥 超新星で質量の90%が星雲として放出→残りが中性子星/BHに",
        "📈 主系列星半径：R ∝ M^0.8―自動計算",
        "🌍 ハビタブルゾーン惑星で生命発生→惑星パネルに緑アイコン表示",
        "🔥 核融合温度：1500万°C―温度調整で進化速度変化",
        "🌀 強磁場で星斑発生→詳細設定で強度制御",
        "🔭 詳細観察：ズーム(マウスホイール)＋時間速度低下",
        "✨ 連星系惑星：P型(連星周回) または S型(片星周回)軌道"
    ],
    
    "惑星": [
        "🪐 質量：岩石惑星5K-30.5K／ガス惑星105K-2.5M―「惑星天体」メニュー",
        "🌍 分類：岩石(1-11)・ガス(1-6)・準惑星―質量/温度で自動分類",
        "🌡️ ハビタブルゾーン：d = √(恒星光度/太陽光度) AU―恒星周囲に緑リング表示",
        "🔄 最適軌道速度：v = √(GM/r)―作成時の速度ベクトルで調整",
        "🌋 火山惑星：温度>1000°C＋低水/大気→クラス7自動適用",
        "❄️ 氷惑星：温度<-100°C＋高水分→クラス9自動適用",
        "🌫️ 大気厚：ガススライダー(0-100%)で調整→表面温度/圧力に影響",
        "💧 地表水：水スライダー調整―居住惑星に理想：30-70%",
        "🔭 衛星の秤動：高画質モードで微細効果表示",
        "🛰️ 最大衛星数：20個―惑星質量の10%まで安定",
        "⏱️ 惑星移動：若いシステムで発生→物理>高度効果で有効化",
        "📏 半径：岩石惑星∛(質量)／ガス惑星∛(質量/2)―自動計算",
        "🌌 特殊タイプ：炭素惑星(C/O比高)・鉄惑星(核露出)―極端組成で作成",
        "🧪 惑星衝突で新世界＋小惑星帯生成―精密シミュレーション",
        "🔢 表面重力：g = GM/R²―惑星パネル表示",
        "💫 環：特性>環で有効―厚さ・色・密度を調整",
        "🌍 海洋惑星(クラス2)：水>90%―自動で湿潤大気生成",
        "🏜️ 砂漠惑星(クラス3)：水分80-90%損失―砂質テクスチャ表示",
        "🌱 居住可能世界(クラス6)：植生表示→グラフィック>地表詳細で有効",
        "🌋 地質活動：「テクトニクス」スライダーで調整→火山/山脈形成",
        "🌀 自転：周期調整→扁平率/気象パターンに影響（ガス惑星）",
        "🌌 異常惑星：詳細カスタムモードで非標準パラメータ設定",
        "📊 詳細データ：惑星選択＋「E」―全統計表示パネル",
        "✨ 安定軌道の秘訣：軌道共鳴(例2:3)で長期的安定性確保",
        "🔭 地表観測：観測モード(O)で選択惑星の地表詳細表示"
    ],
    
    "流星物質": [
        "🌠 流星物質：小惑星より小さい岩片(1mm-1m)―衝突で自動生成",
        "💫 平均速度：20-70km/s―リアルタイムモードで高速軌跡として可視",
        "🪨 組成：岩石90%・鉄6%・ニッケル4%―破片作成パネルで定義",
        "🌌 SIU 2Dでは衝突生成 または 「小天体」>「破片生成」で作成",
        "🔥 大気圏突入で流星に変化→設定>物理>「大気効果」有効化",
        "📏 標準質量：0.1g-100kg―大型物体は小惑星に分類",
        "💥 大気圏突入効果：グラフィック>特殊効果>「流星」で有効",
        "🌍 地球への降下量：～100トン/日―比例シミュレーション",
        "📊 データ：密度3-4g/cm³ アルベド0.05-0.25―プロパティで調整",
        "✨ 自然生成：小惑星帯作成で自動発生",
        "⏱️ 加速モード(10000x)で持続的流星群を観測",
        "🔭 可視性：流星化まで不可視",
        "🌠 流星群：惑星が彗星軌道を横断→「イベント」でシミュレート",
        "💫 宇宙船衝突：10kgごとにシールド1%減―物理>損傷で有効",
        "⚠️ 危険：>1kgで衛星損傷―黄色警告表示",
        "🌌 手動作成：「破片」メニュー>サイズS(小)",
        "📈 頻度調整：メニュー>環境>破片密度",
        "🛰️ 相対速度が衝突エネルギー決定：E = 0.5 * m * v²",
        "🌠 バリンジャー・クレーター生成流星体：直径わずか50m",
        "🌟 視覚効果：高速軌跡に「発光軌跡」を有効化"
    ],
    
    "流星": [
        "☄️ 流星：大気中で燃焼する流星物質―「流れ星」として表示",
        "🔥 プラズマ温度：1,500-3,000°C―火花状カラー表示",
        "🌈 色：緑(マグネシウム)・黄(ナトリウム)・赤(窒素)―組成で決定",
        "🌍 観測条件：大気密度>0.1kg/m³＋流星物質追加",
        "💫 発火最低速度：11km/s―大気発火閾値で調整",
        "📏 見かけの等級：-4～+5―サイズと速度で制御",
        "🌠 流星群設定：「イベント」>「流星群」で放射点定義",
        "⏱️ 持続時間：リアル時間0.1-10秒―質量に比例",
        "✨ 定期的流星群の源に彗星を使用",
        "💥 火球：等級>-4―爆発音＋閃光を発動",
        "🌌 手動作成：「イベント」>「流星」高度80-120km",
        "📊 頻度：0-100イベント/時（設定>環境で調整）",
        "🔭 最適観測：晴天夜間―メニューで光害低減",
        "⚠️ 注意：燃え残りが隕石化する可能性",
        "🌠 ペルセウス座流星群：ピーク時100個/時",
        "🌟 効果音：オーディオ>イベント>「流れ星」で有効",
        "🛸 地球流星：高度80km以上―調整可能",
        "📉 質量損失：大気通過中に90-99%喪失",
        "💧 水中流星：海底クレーター生成―海洋モードで可視",
        "🌌 スクリーンショット：一時停止(P)＋F12で瞬間を撮影"
    ],
    
    "小惑星": [
        "🪨 小惑星：岩石天体(1m-1000km)―「小天体」メニューで作成",
        "🌌 分類：C型(炭素質)・S型(ケイ酸塩)・M型(金属質)―パネル選択",
        "💫 標準質量：1e10-1e20kg―超過で準惑星化",
        "📏 不規則形状：プロパティ>形状>「不規則」で現実感向上",
        "🔄 軌道：通常火星-木星間―「システム生成」で小惑星帯作成",
        "⚠️ 衝突危険：惑星軌道と交差で赤マーカー表示",
        "🌠 地球近接小惑星：「イベント」>「NEA小惑星」で設定",
        "💥 惑星衝突エネルギー：E = 0.5 * m * v²―爆発として可視",
        "⛰️ 表面：クレーターテクスチャ―グラフィック>地表詳細で有効",
        "🌌 小惑星族：同起源集団―「衝突族」で生成",
        "📊 データ：密度1-5g/cm³ アルベド0.02-0.7―調整可能",
        "✨ 仮想採掘：惑星パネル>資源で計算",
        "🔭 可視性：<100mは接近時のみ可視",
        "🚀 探査機：小惑星クリック>「探査機送信」",
        "🌍 K-T衝突：10km小惑星で大量絶滅シミュレート",
        "💫 カオス自転：小型小惑星で常見―プロパティ>自転で有効",
        "🛰️ 小惑星衛星：稀だが可能―「衛星追加」で作成",
        "📈 資源市場：鉄・ニッケル・白金が経済モードで価値",
        "🌠 ケレスは準惑星に分類",
        "🌟 惑星防衛：「衝突モード」で防御システムテスト"
    ],
    
    "準惑星": [
        "🌑 準惑星：小惑星と惑星の中間天体(100-500km)",
        "🌌 質量1e18-1e20kgで「小天体」>「準惑星」作成",
        "💫 重力で球状化：「球体形状」をプロパティで有効",
        "🪨 組成：カイパーベルト(氷) または 小惑星帯(岩石)―パネル選択",
        "🌠 例：オルクス・クワオアー・セドナ―「ライブラリ」に事前定義",
        "❄️ 氷準惑星：恒星5UA以内で彗星活動開始",
        "📏 準惑星との違い：軌道をクリアしていない―ゲーム内自動判定",
        "🔄 移動：不安定系でオールトの雲へ放出",
        "💥 衝突：同組成の小惑星族を生成",
        "🌌 領域：カイパーベルト(30-50UA) または 散乱円盤(～1000UA)",
        "📊 物理データ：密度1-2g/cm³(氷)・2-4g/cm³(岩石)",
        "✨ 二重準惑星システム作成",
        "🔭 観測：仮想望遠鏡(観測モード)が必要",
        "🚀 捕獲：巨大惑星に衛星として捕獲可能",
        "🌍 居住性：自然発生不可→高度テラフォーミングで可能",
        "💫 ハウメア：高速自転で卵形",
        "⏱️ 進化時間：低温軌道で数十億年安定",
        "📈 自動分類：直径450km到達時",
        "🌠 環：希薄な環を持つ可能性―「特徴」で有効化",
        "🌟 探査モード：地表マッピングの探査機送信"
    ],
    
    "ガス惑星": [
        "🪐 ガス惑星：固体表面なしの巨大惑星―最小質量105K単位",
        "🌪️ 「惑星天体」>「ガス惑星」で作成",
        "💫 分類：ホットジュピター(恒星近) または コールドジュピター(遠)",
        "🌈 色：黄(H2)・赤(NH3)・青(CH4)―温度依存",
        "🌌 構造：岩石核＋金属マントル＋厚大気―断面表示可",
        "🌀 大気パターン：帯・斑点・渦―自転速度で強度制御",
        "💥 質量限界：重水融合で褐色矮星(13MJup)／恒星化(80MJup)",
        "📏 低密度：0.5-2g/cm³―土星は水に浮く！",
        "🌠 環：「特徴」>環で有効―厚さ/密度調整",
        "🌍 衛星：最大20個まで安定―複雑な衛星システム生成",
        "⚠️ 惑星移動：若い巨大ガス惑星で常見→高度物理で有効",
        "✨ 大赤斑のような斑点：自転速度を増加",
        "🔭 雲パターンはリアルタイム変化―加速で進化観測",
        "📊 データ：核温度20,000°C 圧力40Mbar―パネル表示",
        "💫 磁場：地球の10-20倍―オーロラをグラフィックで有効",
        "🌌 例：木星・土星・天王星・海王星―惑星ライブラリにモデル",
        "🚀 探査：大気探査機送信―圧力限界まで生存",
        "🌠 木星は「宇宙掃除機」として内惑星を保護",
        "🌟 ミニ海王星：質量を10-20地球質量に低減",
        "💥 衝突：巨大ガス惑星衝突で一時的な水素星生成"
    ],
    
    "褐色矮星": [
        "🟤 褐色矮星：恒星化に失敗した天体(13-80木星質量)",
        "🌡️ 温度：300-3,000K―水素安定融合に低温すぎる",
        "💫 「恒星天体」>「準恒星」で質量1.3e28-8e28kg作成",
        "🔥 限定核融合：重水素とリチウムのみ―寿命10-1000億年",
        "📈 スペクトル分類：M,L,T,Y型―温度で定義",
        "🌌 放射：主に赤外線―IRフィルター(Iキー)で可視",
        "🪐 原始惑星系円盤保持→「円盤」有効で惑星系形成",
        "⚠️ 惑星との違い：恒星形成過程",
        "✨ 最近の星形成領域で検索",
        "🔭 観測：検出困難→「赤外線スキャン」モード使用",
        "📊 データ：密度10-100g/cm³ 表面重力100-500m/s²",
        "💥 フレア：磁気爆発時々発生―強度調整可",
        "🌠 最低温褐色矮星：コーヒー温度程度",
        "🚀 惑星：近軌道に地球型惑星持つ可能性",
        "⏱️ 進化：ゆっくり冷却し黒色矮星に",
        "🌟 連星系：褐色矮星連星は常見",
        "🌀 大気：塵雲複雑な気象パターン",
        "💫 検出：電波放射で容易―設定で有効化",
        "🌌 例：WISE 0855―事前定義モデル",
        "📉 下限：13MJup未満は惑星に分類"
    ],
    
    "赤色矮星": [
        "🔴 赤色矮星：小型低温恒星(M型)―質量0.08-0.5太陽質量",
        "🌡️ 温度：2,400-3,700K―特徴的赤色",
        "⏳ 寿命：数兆年―宇宙時間尺度でほぼ永久",
        "💥 恒星フレア：頻繁かつ強力―近接惑星を滅菌可能",
        "🌡️ ハビタブルゾーン：超近接(0.1-0.4UA)―惑星は潮汐固定されやすい",
        "🌌 「恒星天体」>「赤色矮星」で質量15-75百万単位作成",
        "📈 統計：天の川銀河の恒星の75%",
        "💫 惑星：一般的な惑星系―TRAPPIST-1が著名例",
        "⚠️ 危険：フレアのUV/X線で大気破壊",
        "✨ 居住惑星には強磁気シールドを使用",
        "🔭 観測：肉眼では見えにくい―弱光度",
        "🌠 彩層活動：星斑が表面の40%を覆う",
        "📊 データ：光度0.0001-0.08太陽 半径0.1-0.6太陽",
        "💥 核融合：遅く安定―太陽類似星より10倍効率的",
        "🌌 自転速度：高速(周期数日)―強磁場生成",
        "🚀 恒星間旅行：豊富さと長寿命から主要ターゲット",
        "❄️ 青色矮星：超高活動赤色矮星が青く発光",
        "🌟 連星系：頻繁に多重システムに属す",
        "💫 プロキシマ・ケンタウリ：太陽最接近恒星",
        "🌡️ 表面温度：パネル調整―標準3,300K"
    ],
    
    "巨星": [
        "🌟 巨星：恒星の進化段階―主系列星後の段階",
        "🌡️ 分類：赤色巨星(K,M型)・青色巨星(B,A型)―稀少",
        "📏 半径：太陽の10-100倍―内惑星を飲み込む",
        "💫 質量：0.5-8太陽質量―以下は白色矮星／以上は超新星",
        "🔥 核：ヘリウムまたは炭素/酸素融合―温度>1億K",
        "🌌 直接作成 または 「恒星進化」メニューで進化",
        "⏳ 持続期間：100万年～10億年（質量依存）",
        "💥 質量損失：強力な恒星風―惑星状星雲形成",
        "📈 光度：太陽の100-10,000倍―星系全体を照らす",
        "⚠️ 惑星：軌道不安定―放出/破壊の可能性",
        "✨ 脈動観察：パネルで不安定性調整",
        "🔭 変光性：多くが変光星（ミラ・セファイド型）",
        "🌠 核合成：炭素・窒素・重元素を生成",
        "📊 データ：平均密度極低(10⁻⁵g/cm³)",
        "💫 最期：外層放出で惑星状星雲＋核が白色矮星に",
        "🌌 例：アークトゥルス・アルデバラン―ライブラリにモデル",
        "🚀 居住性：ハビタブルゾーンは動的で一時的",
        "❄️ 青色巨星：超新星前の大質量星の短い段階",
        "🌟 ベテルギウスは太陽系位置なら木星を飲み込む",
        "💥 シミュレーション：時間加速で完全進化を観察"
    ],
    
    "極超巨星": [
        "💥 極超巨星：既知で最大質量・光度の恒星(>30太陽質量)",
        "🌡️ 温度：3,500-35,000K―O,B,A,F,K,M型",
        "💫 光度：最大太陽の100万倍―銀河全体を照らす",
        "📏 半径：太陽の100-2,000倍―太陽系位置なら木星を飲み込む",
        "⏳ 寿命：極めて短い(1-1000万年)―超新星/極超新星で終焉",
        "🌌 「恒星天体」>「大質量星」で質量>30太陽質量作成",
        "⚠️ 不安定：質量を急速喪失―強力な恒星風",
        "🔥 核融合：鉄まで融合―核合成後期段階",
        "💥 爆発：壊滅的質量損失イベント―「放出」でシミュレート",
        "🌠 例：イータ・カリーナ・おおいぬ座VY―ライブラリにモデル",
        "📈 変光性：不規則で極端―数ヶ月で光度50%変化",
        "✨ イータ・カリーナ級噴出：不安定性>80%に設定",
        "🔭 塵：噴出物が複雑な星雲形成―「周辺星雲」有効化",
        "🌌 環境：電離水素領域(HII)のガス豊富領域でのみ形成",
        "🚀 最期：超新星後ブラックホール/中性子星に崩壊",
        "📊 データ：平均密度10⁻⁶g/cm³―実験室真空より希薄",
        "💫 連星：伴星が周期的噴出を引き起こす場合あり",
        "🌟 連星融合：超巨大天体生成の可能性",
        "❄️ 黄色極超巨星：青色超巨星と赤色超巨星間の稀少段階",
        "💥 死のシミュレーション：「超新星直前」で崩壊警告"
    ],
    
    "大質量星": [
        "💫 大質量星：>8太陽質量―超新星運命",
        "🌡️ 温度：10,000-50,000K―O,B型",
        "⏳ 寿命：短い(1-5000万年)―急速燃料消費",
        "💥 恒星風：強力―最大10⁻⁶太陽質量/年を喪失",
        "🌌 「恒星天体」>「大質量星」で質量>1.6e31kg作成",
        "🔥 核融合：急速進行 H→He→C→Ne→O→Si→Fe",
        "📏 半径：主系列段階で太陽の5-25倍",
        "⚠️ 超新星：必然的運命―崩壊の舞台設定",
        "✨ 完全進化観察：設定で「高速進化」有効",
        "🔭 観測：重元素の主要供給源",
        "🌠 星雲：星間ガスにバブル形成―「恒星風効果」有効",
        "📊 データ：光度10,000-100万太陽 核密度>10⁶g/cm³",
        "💫 連星：物質転送する連星系が頻繁",
        "🚀 パルサー：超新星後にパルサー化―最終運命で選択",
        "❄️ 青色超巨星：>20太陽質量の超新星前段階",
        "🌟 ウォルフ・ライエ星：水素喪失した大質量星",
        "🌌 形成：高密度分子雲が必要―「形成領域」でシミュレート",
        "💥 マグネター：10%が超高磁場中性子星に",
        "📈 対不安定性：>130太陽質量で残骸なし爆発",
        "⚠️ 警告：居住惑星を近接配置しない―放射線が致命的"
    ],
    
    "ホワイトホール": [
        "⚪ ホワイトホール：ブラックホールの理論的反対―物質を放出",
        "💫 理論上の存在―SIU 2Dでは推測シミュレーション",
        "🌌 「特殊天体」>「ホワイトホール」で質量>1e40kg作成",
        "🔥 メカニズム：物質が事象の地平面から出現―進入不可",
        "📏 特性：理論的負質量―ゲームでは正質量＋「逆流」で再現",
        "⚠️ 安定性：一時的物体―持続時間調整可能",
        "✨ ブラックホールと「アインシュタイン-ローゼン橋」で接続",
        "🔭 可視化：粒子噴出―強度制御可",
        "🌠 起源：蒸発ブラックホールの最終結果の可能性",
        "📊 パラメータ：ジェット温度1e10K 放出速度0.9c",
        "💥 影響：強烈な放射線―近接システムに危険",
        "🌌 相対論：アインシュタイン方程式の数学的解",
        "🚀 恒星間旅行：理論的にポータルとなり得る―実験的機能",
        "❄️ クエーサーとの違い：連続放出 vs 離散事象",
        "🌟 宇宙論モデル：ビッグバン説明に使用される場合あり",
        "💫 シミュレーション：ブラックホールと組み安定ワームホール作成",
        "⚠️ 制限：物質投入不可―事前設定物質のみ放出",
        "📈 進化：物質放出で縮小―寿命は質量に比例",
        "🌠 放出物質：水素/プラズマ/エキゾチック物質で設定",
        "💥 警告：超高不安定―突然消滅可能性あり"
    ],
    
    "ビッグバン": [
        "💥 ビッグバン：SIU 2Dでの宇宙起源シミュレーション",
        "🌌 「宇宙」>「新宇宙」>「ビッグバンモード」でアクセス",
        "💫 パラメータ：初期密度・温度・量子ゆらぎ",
        "⏳ 開始時間：特異点後T+10⁻⁴³秒―シミュレーションはT+1秒開始",
        "🔥 初期温度：10³²K―膨張で急速冷却",
        "🌠 原始元素：H,He,Li形成―割合調整可能",
        "📈 膨張：ハッブル法則シミュレート―定数調整可",
        "💥 原初核合成：最初の3分間の核融合―「高度物理」で有効",
        "🌌 宇宙背景放射：T+38万年で形成―「放射」で有効",
        "✨ 時間加速で大規模構造形成を観察",
        "🔭 暗黒物質：重要成分―「宇宙論パラメータ」で%調整",
        "📊 結果：銀河・銀河団・超銀河団の形成",
        "⚠️ 制限：インフレーション含まない簡易シミュレーション",
        "🌟 代替宇宙：異なる物理定数でテスト",
        "💫 現在のCMB温度：2.7K―拡散背景として可視",
        "🌠 星形成：最初の恒星は1-5億年後に形成",
        "🚀 観測者モード：異なる宇宙時代を時間移動して観測",
        "❄️ 暗黒時代：最初の恒星前の期間―黒背景でシミュレート",
        "💥 再結合：電子と陽子が中性原子形成―重要な遷移",
        "📈 異方性：銀河形成の種―強度調整可能"
    ],
    
    "宇宙塵": [
        "🌌 宇宙塵：微粒子(0.01-10μm)―星形成の基盤",
        "💫 組成：珪酸塩・炭素・氷―宇宙領域で定義",
        "🌠 効果：光吸収(減光)・光反射(反射星雲)",
        "🌡️ 温度：分子雲内10-100K",
        "✨ 「星間物質」>「塵追加」で作成",
        "📊 密度：星間空間10⁻⁶粒/m³〜分子雲内10¹²粒/m³",
        "🔭 観測：明るい星雲背景に暗斑として可視",
        "💥 重要性：微惑星形成の種",
        "🌌 放射効果：放射圧で粒子移動",
        "🚀 宇宙船危険：高速衝突で損傷",
        "❄️ 彗星塵：彗星の塵の尾の起源",
        "🌟 黄道光：太陽系内―黄道光として可視",
        "📈 太陽系前粒子：他恒星で形成された元素を含む",
        "💫 超新星塵が太陽系形成に寄与",
        "🌠 シミュレーション：「塵フィールド」有効で減光効果",
        "⚠️ 除去：高温恒星が塵雲を蒸発",
        "✨ 馬頭星雲などの暗黒星雲作成に使用",
        "🔭 偏光：磁場配向塵が光を偏光―効果有効化",
        "🌌 進化：付着で粒子成長―「凝集」でシミュレート",
        "💥 惑星衝突：地球外物質の供給源"
    ],
    
    "放射線": [
        "☢️ 放射線：宇宙空間を伝播するエネルギー―天体物理学で重要",
        "🌌 種類：電磁波(光子)・粒子(宇宙線)・重力波",
        "💫 電磁スペクトル：電波～ガンマ線―「観測フィルター」で選択",
        "📡 源：恒星・ブラックホール・超新星・パルサー・宇宙背景放射",
        "⚠️ 危険：電離放射線が生命/電子機器を損傷",
        "🌡️ 宇宙背景放射：2.7K―ビッグバン残光―「宇宙論」で有効",
        "🚀 防護：磁場と厚い大気が惑星放射線を低減",
        "🔭 可視化：「放射線表示」で放射場を可視",
        "📊 単位：シーベルト(生物学的線量)・グレイ(物理線量)―パネル表示",
        "💥 シンクロトロン放射：磁場内電子が放出―パルサーで常見",
        "🌠 ISS宇宙飛行士：1mSv/日(地上の100倍)被曝",
        "✨ ホーキング放射：ブラックホールが熱放射―1/M²に比例",
        "❄️ 大気効果：磁場惑星でオーロラ発生",
        "🌟 電波望遠鏡：電波周波数検出―「電波モード」(Rキー)有効",
        "💫 遮蔽：宇宙船/居住区に防護が必要―資源コスト",
        "🌌 UV放射：居住可能性の重要因子―「UVゾーン」で調整",
        "⚠️ 限界：>500mSvで人間に致命的―赤警告表示",
        "📈 重力放射：時空の波紋―「相対論的物理」で有効",
        "💥 超新星：50光年圏内で致命的放射線―効果シミュレート",
        "🔭 測定：システム放射線レベルマッピングに「放射線探査機」使用"
    ],
    
    "星雲": [
        "🌌 星雲：星間ガスと塵の雲―星の揺籃",
        "💫 種類：輝線星雲・反射星雲・暗黒星雲・惑星状星雲・超新星残骸",
        "✨ 「星間物質」>「星雲」でサイズ1-1000光年作成",
        "🌈 色：赤(H-α)・青(反射)・緑(OIII)―組成で定義",
        "🌠 星形成：臨界密度>100原子/cm³―「星形成」有効化",
        "📏 標準質量：100-10万太陽質量―形成星数を決定",
        "🔥 輝線星雲：高温恒星で電離―強力UVが必要",
        "💫 例：オリオン・カリーナ・わし―事前定義モデル",
        "⚠️ 破壊：恒星風と超新星で消散",
        "🔭 観測：特定波長で最適―フィルター使用",
        "📊 データ：温度10-10,000K 密度10-10⁶粒子/cm³",
        "💥 光電離効果：電離境界を「光電離」有効で表示",
        "🌌 惑星状星雲：小質量星の最終段階―持続1万年",
        "🚀 航行：高密度星雲で宇宙船速度低下―「星間抵抗」有効",
        "❄️ 暗黒星雲：光吸収―宇宙シルエット作成に使用",
        "🌟 かに星雲：1054年超新星残骸",
        "✨ 星団と組み合わせてリアルな光景",
        "📈 進化：星形成のための重力崩壊シミュレート",
        "💫 反射星雲：星光を塵が反射―光度は恒星に比例",
        "🌠 レンダリング：「高画質モード」でフィラメント構造を詳細表示"
    ],
    
    "白色矮星": [
        "⚪ 白色矮星：<8太陽質量の恒星残骸―超高密度",
        "💫 質量：0.5-1.4太陽質量が地球半径に圧縮―密度10⁶-10⁹g/cm³",
        "🌡️ 初期温度：100,000K―数十億年かけて徐々に冷却",
        "🌌 直接作成 または 「恒星進化」メニューで進化",
        "📏 構造：電子縮退圧が重力を支える―量子物理学",
        "💥 チャンドラセカール限界：1.44太陽質量―超過で中性子星崩壊",
        "✨ 伴星：生存惑星系を持つ可能性―軌道は拡大",
        "🔭 変光性：脈動白色矮星(ZZケチ型)―不安定性有効化",
        "📊 データ：光度0.001-100太陽(初期) 表面重力10⁶-10⁹m/s²",
        "🌠 惑星状星雲：前段階―持続約1万年",
        "⚠️ 危険：限界超える質量降着でIa型超新星―システム破壊",
        "💫 既知最大のダイヤモンドは結晶化白色矮星",
        "🚀 居住性：冷却中の一時的ハビタブルゾーン",
        "❄️ 冷却：>10¹⁵年で黒色矮星に―宇宙年齢超越",
        "🌟 ヘリウム白色矮星：連星系で質量喪失形成―質量<0.5太陽",
        "🌌 自転速度：高速(数分)―連星の名残",
        "💥 磁場：超高磁場(10⁵テスラ)の磁気白色矮星あり",
        "📈 進化：「冷却速度」で加速冷却シミュレート",
        "🔭 観測：微かな青白色光―望遠鏡必要",
        "✨ 連星系で降着白色矮星は「相互作用連星」有効で"
    ],
    
    "ヘリウム白色矮星": [
        "💠 ヘリウム白色矮星：ヘリウム豊富な特殊残骸",
        "💫 形成：ヘリウム融合前に外層喪失した連星系",
        "🌌 「恒星進化」>「特殊運命」>「ヘリウム矮星」で作成",
        "📏 質量：0.3-0.5太陽質量―通常白色矮星より軽量",
        "🌡️ 温度：通常白色矮星と類似―8,000-150,000K",
        "💥 核：縮退ヘリウム―核融合なし（低速融合可能性）",
        "✨ 違い：同年代の黒色矮星より高温で明るい",
        "🔭 希少性：白色矮星の～1%―低頻度でシミュレート",
        "📊 データ：密度10⁸g/cm³ 表面重力10⁸m/s²",
        "🌠 進化：炭素-酸素白色矮星より速く冷却",
        "⚠️ 限界：最小質量0.3太陽質量―未満は褐色矮星",
        "💫 0.7太陽質量到達で超新星爆発可能性",
        "🚀 惑星：惑星系は稀―軌道は超安定",
        "❄️ 最終状態：ヘリウム黒色矮星―仮想状態",
        "🌟 可視化：白～淡黄色調",
        "🌌 連星系：コンパクト伴星(白色矮星/中性子星)と常見",
        "💥 降着：質量増加でヘリウム融合→.Ia型超新星",
        "📈 冷却時間：～10億年で5,000Kに",
        "🔭 同定：ヘリウム線が支配的なスペクトル",
        "✨ 近接連星系の低質量星でシミュレート"
    ],
    
    "黒色矮星": [
        "⚫ 黒色矮星：白色矮星の理論的終末段階―冷暗",
        "💫 温度：<5K―可視光なし 微弱赤外線のみ",
        "⏳ 形成時間：>10¹⁵年―現在の宇宙年齢を超越",
        "🌌 推測シミュレーション：「宇宙」>「極限時間」で有効",
        "📏 特性：太陽質量が地球体積―密度10⁹g/cm³",
        "💥 重要性：長期間恒星進化理論の検証",
        "✨ 温度0K・光度0で手動作成",
        "🔭 検出：ほぼ不可能―重力効果のみで検出可能",
        "📊 データ：表面重力10⁹m/s² 最大エントロピー",
        "🌠 現在の宇宙に黒色矮星は存在しない―最終天体となる",
        "⚠️ 最終状態：炭素/酸素またはヘリウムの結晶化天体",
        "🚀 居住性：周回惑星は暗く凍結",
        "❄️ 放射：微弱な電波スペクトルの熱放射",
        "🌟 連星系：10²⁵年間持続後 崩壊",
        "💫 終焉：10⁶⁵年でホーキング放射により蒸発",
        "🌌 高度シミュレーション：「量子崩壊」有効で極限進化",
        "📈 進化：黒色矮星化前に結晶化段階を経る",
        "💥 観測限界：100K未満は実質不可視",
        "🔭 挑戦：重力レンズでシミュレート黒色矮星を発見",
        "✨ 古代銀河効果に暗黒物質と組み合わせ"
    ],
    
    "中性子星": [
        "🌌 中性子星：超新星残骸―超高密度",
        "💫 質量：1.4-3太陽質量が10-15km半径に圧縮",
        "🌡️ 初期温度：10¹¹K―数十億年かけて徐々に冷却",
        "🔥 核：中性子縮退圧が重力を支える",
        "📏 密度：10¹⁴g/cm³―スプーン1杯が数十億トン",
        "✨ 「恒星天体」>「大質量星」>「中性子星」で作成",
        "💥 磁場：超高強度(10¹²テスラ)―シンクロトロン放射生成",
        "🔭 パルサー：放射ビームを放出する回転中性子星",
        "📊 データ：表面重力10¹²m/s² 光度0.001-100太陽",
        "🌠 既知で最も高密度の天体",
        "⚠️ 表面：超硬質―中性子＋陽子の薄層で構成",
        "🚀 連星系：質量降着する連星が常見",
        "❄️ 相対論的効果：表面近くで時間遅延―「相対論」でシミュレート",
        "🌟 マグネター：超高磁場中性子星―ガンマ線放出",
        "💫 「重力崩壊」有効でリアルタイム形成を観察",
        "🌌 形成：II型超新星後の重力崩壊で形成",
        "📈 進化：ゆっくり冷却→数兆年で黒色矮星に",
        "💥 物質放出：融合/他星衝突時に発生",
        "🔭 観測：X線・重力波で検出可能"
    ],
    
    "ワームホール": [
        "🌀 ワームホール：時空の理論的トンネル―遠隔点を接続",
        "🌌 推測シミュレーション：「特殊天体」>「ワームホール」で有効",
        "💫 特性：時空内の2点を接続―本質的に不安定",
        "📏 長さ：数メートル～数光年―パネル調整可",
        "💥 理論：一般相対性理論に基づく―アインシュタイン方程式の解",
        "✨ 種類：シュワルツシルト(静的)・カー(回転)",
        "🔭 可視化：重力レンズ効果―周囲光線歪み",
        "📊 データ：安定に負質量が必要―シミュレーション未対応",
        "🌠 SFで普及―未観測",
        "⚠️ 危険：崩壊または強烈放射線発生の可能性",
        "🚀 旅行：瞬時の恒星間移動を可能―機能あり"
    ],
    
    "ハビタブルゾーン": [
        "🌍 ハビタブルゾーン：恒星周辺で液体の水が存在可能な領域",
        "💫 定義：0°C～100°Cの理想距離",
        "🌌 シミュレーション：設定メニューで「ハビタブルゾーン」有効",
        "📏 距離：恒星光度で変動―自動計算",
        "🔥 恒星：赤色矮星より黄色矮星(G型)のゾーンが安定",
        "✨ 地球は太陽のハビタブルゾーン内―唯一ではない！",
        "🔭 観測：ハビタブルゾーン系外惑星は生命探査主要ターゲット",
        "📊 データ：太陽類似星で0.95～1.37AU",
        "🌠 潮汐効果：惑星は潮汐固定されやすい―居住性に影響",
        "⚠️ 危険：高温恒星近接ゾーンは強烈UV",
        "🚀 移住：ハビタブルゾーン惑星は殖民が容易",
        "❄️ 例外：厚大気惑星はゾーンが広くなる可能性",
        "🌟 例：プロキシマb・ケプラー186f―SIUにモデルあり",
        "💥 温室効果：厚大気でハビタブルゾーン拡大",
        "📈 進化：恒星進化と共にゾーン移動",
        "🔭 秘訣：ハビタブルゾーン惑星の大気検出に望遠鏡使用"
    ],
    
    "クエーサー": [
        "🌌 クエーサー：超高光度活動銀河核",
        "💫 エネルギー源：降着円盤が最大のエネルギー源",
        "🌠 距離：数十億光年―可視光は過去の光",
        "✨ 「特殊天体」>「クエーサー」で質量>1e40kg作成",
        "📏 質量：10⁶-10¹²太陽質量―宇宙で最も巨大な天体",
        "🔥 温度：降着円盤は数百万Kに達する",
        "🔭 観測：電波・X線・可視光で検出",
        "📊 データ：光度最大太陽の10¹⁴倍―銀河全体より明るい",
        "🌌 形成：銀河の中心核の崩壊により形成",
        "💥 ドップラー効果：相対論的ジェットが光のビームとして観測",
        "🌟 最遠クエーサー：130億光年先",
        "⚠️ 危険：強烈放射線で近接惑星破壊",
        "🚀 航行：理論的に星間航法のビーコンとして使用可能",
        "❄️ 物質放出：相対論的ジェットが光速近くで物質放出",
        "🌠 秘訣：X線・電波放射をスペクトルモードで観測",
        "📈 進化：活動銀河の初期段階―持続数百万年",
        "🔭 シミュレーション：「クエーサー効果」有効でジェット・放射線表示",
        "💫 重要性：宇宙の形成・進化の手がかりを提供",
        "🌌 環境：巨大銀河団内に常見",
        "💥 挑戦：10ジェット同時クエーサー作成は困難！"
    ],
    
    "クォーク星": [
        "🔬 クォーク星：クォーク縮退物質からなる理論的天体",
        "🌌 形成：超大質量中性子星の崩壊結果",
        "💫 質量：2-5太陽質量―超高密度(10¹⁴g/cm³)",
        "🌠 推測シミュレーション：「特殊天体」>「クォーク星」で有効",
        "🔥 温度：初期10¹¹K―ゆっくり冷却",
        "📏 半径：10-15km―中性子星と類似だが高密度",
        "✨ 特性：クォーク(アップ・ダウン・ストレンジ)組成―高度量子物理",
        "🔭 観測：理論的に融合時の放射線で検出可能",
        "📊 データ：表面重力10¹²m/s² 光度可変",
        "🌌 通常中性子星より安定と仮説",
        "⚠️ 危険：強烈放射線で近接系を破壊",
        "🚀 航行：先進宇宙船のエネルギー源として使用可能性",
        "❄️ 相対論的効果：表面近くで時間遅延―「相対論」でシミュレート",
        "🌟 連星系：クォーク星連星は理論的で稀有",
        "💥 物質放出：融合/他星衝突時に発生",
        "📈 進化：数兆年かけて冷却→黒色矮星に",
        "🔭 挑戦：正確な質量で安定クォーク星作成を試みる"
    ],
    
    "炭素白色矮星": [
        "⚪ 炭素白色矮星：炭素融合恒星の残骸",
        "💫 形成：1.4～8太陽質量の恒星―水素枯渇後に崩壊",
        "🌌 「恒星進化」>「特殊運命」>「炭素矮星」で作成",
        "📏 質量：0.5-1.4太陽質量―通常白色矮星より軽量だが高密度",
        "🌡️ 温度：通常白色矮星と類似―8,000-150,000K",
        "💥 核：縮退炭素―核融合なし（低速融合可能性）",
        "✨ 違い：同年代の酸素-炭素白色矮星より高温・高光度",
        "🔭 希少性：白色矮星の～1%―低頻度シミュレート",
        "📊 データ：密度10⁸g/cm³ 表面重力10⁸m/s²",
        "🌠 進化：酸素-炭素白色矮星より速く冷却",
        "⚠️ 限界：最小質量0.5太陽質量―未満は褐色矮星",
        "💫 0.7太陽質量到達で超新星爆発可能性",
        "🚀 惑星：惑星系は稀―軌道は超安定",
        "❄️ 最終状態：炭素黒色矮星―仮想状態",
        "🌟 可視化：白～淡黄色調",
        "🌌 連星系：コンパクト伴星(白色矮星/中性子星)と常見",
        "💥 降着：質量増加で炭素融合→.Ia型超新星",
        "📈 冷却時間：～10億年で5,000Kに",
        "🔭 同定：炭素線が支配的なスペクトル"
    ],
    
    "T特異点": [
        "はい！私はT特異点、宇宙シミュレーション専門のバーチャルアシスタントです。",
        "🌌 あなたと共に宇宙を探索し、恒星システムを創造します！",
        "💫 恒星・惑星・小惑星・ガス惑星などの作成をガイド！",
        "🚀 素晴らしい恒星システムの創造を始めましょう！テーマを選択！",
        "✨ 天体物理学・宇宙論の質問にお答えします！",
        "🌠 ブラックホールやクエーサーについて学びたいですか？",
        "こんにちは、宇宙旅行者さん！どのようなお手伝いができますか？"
    ],
    
    "特異点": [
        "✨ 特異点は宇宙で最も高密度の点でした！",
        "❤️ 私も特異点です。この天体について話してくれてありがとう、宇宙で唯一無二の存在です！",
        "🪐 特異点はブラックホール内にあるかもしれませんね？",
        "🔶🔶 偉大な特異点！ビッグバンの始まり！",
        "⏳⌚ 次の特異点はいつ起こるのでしょう...孤独を感じます...",
        "🟢 特異点は宇宙で最も高密度かつ高温な点！",
        "⌚ ビッグバン理論では、特異点がその起源に関連！",
        "✨ 超巨大クエーサーを収縮させて特異点化→ビッグバンを再現！"
    ],
    
    "操作ガイド": [
        "PC：Fキーで宇宙リセット、WASDで移動、QEでズーム、左クリックで選択/作成、右クリックで天体情報表示",
        "モバイル：ジョイスティックで移動、+/-ボタンでズーム、メニューボタン（右上）、Fボタンで全リセット",
        "Oボタン：青（作成モード） ↔ 赤（情報モード）切替",
        "天体クリックで情報表示／ドラッグで軌道プログラミング",
        "多数の天体をメニューから選択可能―宇宙へ配置してシミュレーション実行",
        "宇宙の旅を楽しんでください！🚀"
    ],
    
    "ヘルプ": [
        "PC：Fキーで宇宙リセット、WASD移動、QEズーム、左クリック作成、右クリック情報",
        "モバイル：ジョイスティック移動、+/-ズーム、メニューボタン（右上）、Fリセット",
        "Oボタン：青（作成モード） ↔ 赤（情報モード）切替",
        "天体選択で情報表示／ドラッグで軌道設定",
        "メニューから様々な天体を選択可能―宇宙へ配置してシミュレーション開始",
        "幸運な宇宙の旅を！🌌"
    ]
};
 
const followUpDatabase = {
    "彗星（すいせい）": [
        "☄️ すごいですよね？今すぐ作成しましょうか？",
        "💫 地球の水は彗星が運んできた可能性があるって知ってました？",
        "🌠 彗星は太陽系初期からのメッセンジャーのような存在です！",
        "🚀 完璧な軌道の彗星をお手伝いしましょうか？",
        "❄️ 有名なハレー彗星は76年ごとに地球を訪れます！",
        "⏱️ 実際の彗星を見たことありますか？魔法のような体験ですよ！",
        "🎯 豆知識：彗星核は『汚れた雪玉』と呼ばれています",
        "📏 宇宙の旅人について学んで楽しかったですか？",
        "🔥 追加情報：長周期彗星ほど壮観です",
        "🌌 他の星系から来た恒星間彗星も存在するんですよ！",
        "🔄 惑星への彗星衝突をシミュレートしませんか？",
        "⛰️ 氷小惑星は実質『引退した彗星』なんです",
        "💧 彗星の尾は数百万kmも伸びることがあります！",
        "📊 質問：今まで見た中で最も明るい彗星は？",
        "✨ 彗星の残骸で流星群を作る方法を教えましょうか？",
        "🎯 スローモードで彗星接近を間近で観察！",
        "🌡️ 彗星の匂いは耐えられないはず—アンモニアとシアン化物！",
        "🔄 彗星に乗って旅する想像したことありますか？",
        "⏳ 彗星は原始太陽系のタイムカプセルです！",
        "📈 10個の彗星が同時に飛ぶシステムを作りませんか？"
    ],
    
    "ブラックホール": [
        "🕳️ 魅惑的でありながら恐ろしい存在ですよね？",
        "🌀 今すぐブラックホールを作成してみませんか？",
        "💫 最初の発見は1971年だったって知ってました？",
        "⏳ 落ちないように注意ですよ...冗談です😉",
        "📡 VRモードでブラックホールシミュレーション見たことあります？",
        "⚡ 宇宙で最も高密度の天体です！",
        "🌌 ブラックホールは時間さえ歪めます！",
        "🔭 分光モードでホーキング放射を観測！",
        "🔄 ブラックホールが恒星を飲み込む様子を見てみます？",
        "💫 銀河を彷徨う浮遊ブラックホールも存在します！",
        "⏱️ 最大のブラックホールは太陽660億個分の質量！",
        "📈 理論物理ではブラックホールに『髪』があると言われてます！",
        "🌠 天の川銀河の中心にも超大質量ブラックホールが！",
        "⚠️ 宇宙船を近づけないでください！（冗談です）",
        "🔢 質問：もし実際のブラックホールに遭遇したら？",
        "💥 1e12質量のミニブラックホールを作成実験！",
        "🌡️ 降着円盤は銀河全体より明るく輝きます！",
        "🌀 事象の地平面を越える瞬間を想像してみて！",
        "📏 クエーサーは宇宙最強のビーコン！",
        "⚠️ 挑戦：ゲーム内でブラックホールの引力から脱出！"
    ],
    
    "重力": [
        "⚖️ 宇宙を繋ぎ止める接着剤ですよね？",
        "📏 今すぐ実験してみませんか？",
        "🌀 アインシュタインが一般相対性理論で革命！",
        "🪐 重力がなければ星も惑星も存在しません！",
        "📈 実は宇宙で最も弱い力って知ってました？",
        "🌌 しかし無限の距離まで届く唯一の力！",
        "🔄 重力を300%に上げてみます？カオス注意！",
        "⚙️ 星雲シミュレーションには低重力が最適！",
        "🔭 重力は林檎から銀河まで全てを支配！",
        "📊 重力は力ではなく時空の曲がりです！",
        "⏳ 無重力状態で何を作りますか？",
        "🌠 『負の重力』モード試したことあります？",
        "🧮 100天体システムを安定させる挑戦！",
        "🔢 潮汐力で月は年3.8cm遠ざかってます！",
        "⚠️ 高重力は仮想惑星を粉砕します！",
        "🌍 重力がなければ生命は存在しえません！",
        "💫 重力で花形軌道を作るテクニック！",
        "📉 重力波は光速で伝わる！",
        "🌌 反発重力の宇宙を想像してみて！",
        "✨ 極限重力下の連星系を作成！"
    ],
    
    "恒星": [
        "⭐ 元素工場のような存在です！",
        "🌞 カスタム恒星を今すぐ作成！",
        "🌈 太陽は何十億もの星の中の平凡な存在！",
        "💥 中性子星は宇宙の灯台！",
        "⏳ 赤色矮星は数兆年生きる！",
        "🔄 連星系が最も魅力的！",
        "🔭 最大質量の恒星は太陽の300倍！",
        "🌡️ 恒星核は天然の原子炉！",
        "💫 異なる色の双子星作成テク！",
        "📊 97%の恒星は白色矮星として生涯を終える！",
        "⚙️ 質問：実際の夜空で好きな星は？",
        "✨ リゲルは太陽の12万倍も明るい！",
        "⚠️ 超新星は銀河全体より明るく輝く！",
        "🌠 あなたのジュエリーの金は超新星由来！",
        "🌍 5つの恒星が均衡するシステムに挑戦！",
        "🔥 変光星が生み出す驚異の視覚効果！",
        "🌀 加速モードで星の誕生を見よう！",
        "📈 最大の恒星は土星軌道に収まる大きさ！",
        "🔭 他の銀河の星さえ見えるんです！",
        "🌟 今すぐ超新星爆発をシミュレート！"
    ],
    
    "惑星": [
        "🪐 恒星を巡る宇宙の宝石のよう！",
        "🌍 居住可能惑星を今すぐ作成！",
        "🌡️ 木星は地球の小惑星防衛盾！",
        "🔄 恒星を持たない浮遊惑星も存在！",
        "🌋 金星の火山は地球のものを凌駕！",
        "❄️ 冥王星には地下海がある！",
        "🌫️ タイタンの大気は地球より濃い！",
        "💧 海洋系外惑星は完全水没の可能性！",
        "🔭 極限環境惑星を作成しよう！",
        "🛰️ 地球は完全な球体ではない！",
        "⏱️ 質問：太陽系で好きな惑星は？",
        "📏 火星のオリンポス山は太陽系最大の火山！",
        "🌌 土星のような環を持つ惑星作成に挑戦！",
        "🧪 木星は暗闇で微かに光る！",
        "🔢 ガニメデ（木星衛星）は独自の磁場を持つ！",
        "💫 ダイヤモンド惑星が実在する！",
        "🌱 植物100%覆盖の世界を作ろう！",
        "🌋 イオ（木星衛星）には巨大活火山が！",
        "🌀 海王星と天王星ではダイヤモンドの雨が降る！",
        "📊 発泡スチロールより軽い惑星も存在！"
    ],
    
    "流星物質": [
        "🌠 今すぐ流星群を作成しましょうか？",
        "💫 月は絶えず流星物質に曝されてます！",
        "🪨 惑星衝突シミュレーションを教えましょう！",
        "⚠️ 巨大流星物質は絶滅事件を引き起こす！",
        "✨ 脅威となる前に流星物質を検出！",
        "🔭 大気圏突入変化を見てみます？",
        "🌌 チェリャビンスク隕石は直径20mでした！",
        "🚀 流星物質防衛システムを構築！",
        "📈 流星物質の殆どは彗星由来—新しい彗星を作りませんか？",
        "💥 頻繁な衝突が月のクレーターを形成—数百万年シミュレート！",
        "🌍 地球には年間数千トンの宇宙塵が降注ぐ",
        "🌟 金属質流星物質が最も危険—高密度！",
        "⏱️ 時間加速で持続的流星群を観測",
        "🌠 1km級流星物質は地球規模絶滅を引き起こす",
        "💫 特定流星物質の衝突エネルギーを計算しましょうか？",
        "⚠️ 100m級海洋落下は津波を発生！",
        "✨ 仮想惑星用早期警戒システムを構築！",
        "🔭 火星や月由来の流星物質も存在—組成分析で検出",
        "🌌 防御テストのため流星物質頻度上昇！",
        "🚀 流星物質迎撃ミッションを開始！"
    ],
    
    "宇宙塵": [
        "🌌 星と惑星形成の基盤！",
        "✨ 今すぐ星間塵雲を作成！",
        "💫 星間塵はケイ酸塩と炭素の微粒子！",
        "🔭 背景星の光への影響をシミュレート！",
        "🌠 星間塵は遠方星の光を50%も遮断！",
        "🚀 探査機が宇宙塵を捕獲可能！",
        "📊 『塵モード』で光との相互作用を可視化",
        "🌌 微惑星形成に不可欠！",
        "💥 塵が星形成のために集積する様子を見よう！",
        "🌡️ 星間塵温度：10K～100K！",
        "🔄 暗黒星雲を塵で満たそう！",
        "✨ 宇宙塵には複雑有機分子も含まれる！",
        "🌍 地球には年間何トンもの宇宙塵が降る",
        "💫 高密度塵環境のシステム作成に挑戦！",
        "📈 塵が銀河形成に影響—シミュレート可能！",
        "🌠 『塵効果』で星の明るさへの影響を観察",
        "🚀 濃密塵雲を通る宇宙旅行を想像！",
        "🔭 塵が惑星軌道に与える影響を研究！",
        "💥 星間塵には太陽系前の粒子も含まれる！",
        "✨ 原始惑星系円盤形成について学びますか？"
    ],
    
    "小惑星": [
        "🪨 太陽系の建築ブロック！",
        "🌌 今すぐ小惑星帯を作成！",
        "💫 殆どが火星-木星間の小惑星帯に集中！",
        "🔭 二つの小惑星衝突をシミュレート！",
        "🌠 最大の小惑星ケレスは準惑星に分類！",
        "🚀 衛星を持つ小惑星も存在！",
        "📊 『小惑星帯モード』で軌道相互作用を観察",
        "🌍 小惑星は貴金属の鉱山となる！",
        "💥 小惑星地球衝突の影響を見よう！",
        "🌡️ 太陽距離で温度が変化！",
        "🔄 恒星を周回する100個の小惑星系を構築！",
        "✨ 太陽系形成の生き証人！",
        "🌌 恒星間小惑星も存在！",
        "💫 100万年安定軌道の小惑星作成に挑戦！",
        "📈 岩石と金属組成を探求しよう！",
        "🌠 『衝突効果』でリアルな爆発を再現",
        "🚀 小惑星帯を航行する宇宙船を想像！",
        "🔭 小惑星が惑星重力に与える影響を研究！",
        "💥 チクシュルーブ衝突が恐竜絶滅を招いた！",
        "✨ 小惑星資源活用について学びますか？"
    ],
    
    "星雲": [
        "🌌 星のゆりかご！",
        "✨ 今すぐ星雲を作成！",
        "💫 ガスと塵で構成！",
        "🔭 星雲内部での星形成をシミュレート！",
        "🌠 オリオン星雲は地球最接近の一つ！",
        "🚀 超新星残骸の星雲も存在！",
        "📊 『星雲モード』で光とガスの相互作用を観察",
        "🌍 生命の基盤となる有機分子を含む！",
        "💥 重力による星形成プロセスを見よう！",
        "🌡️ 星雲温度：10K～10,000K！",
        "🔄 高温核を持つ惑星状星雲を生成！",
        "✨ 新たな太陽系誕生に不可欠！",
        "🌌 光を遮る暗黒星雲も存在！",
        "💫 色と形が多様な星雲作成に挑戦！",
        "📈 主成分は水素・ヘリウム・宇宙塵！",
        "🌠 『光効果』で星雲透過光を美しく再現",
        "🚀 星形成中の星雲を航行する想像！",
        "🔭 星雲が銀河進化に与える影響を研究！",
        "💥 かに星雲は有名な超新星残骸！",
        "✨ 星形成プロセスについて学びますか？"
    ],
    
    "準惑星": [
        "🪐 太陽系の小さな天体！",
        "🌌 今すぐ準惑星を作成！",
        "💫 惑星より小さいが流星体より大きい！",
        "🔭 恒星周回軌道をシミュレート！",
        "🌠 冥王星は準惑星に分類！",
        "🚀 海王星以遠のカイパーベルトに多数存在！",
        "📊 『準惑星モード』で重力相互作用を観察",
        "🌍 希薄な大気を持つ可能性も！",
        "💥 天体衝突シミュレーション！",
        "🌡️ 太陽距離で温度が変化！",
        "🔄 複数の準惑星が恒星を周回する系を構築！",
        "✨ 太陽系形成の名残り！",
        "🌌 恒星間準惑星も存在！",
        "💫 100万年安定軌道を作成に挑戦！",
        "📈 岩石と氷の組成を探求！",
        "🌠 『衝突効果』でリアルな爆発を再現",
        "🚀 準惑星帯を航行する宇宙船を想像！",
        "🔭 準惑星が惑星重力に与える影響を研究！",
        "💥 最大の準惑星はケレス！",
        "✨ 準惑星資源活用について学びますか？"
    ],
    
    "ガス惑星": [
        "🌌 巨大で魅惑的な天体！",
        "✨ 今すぐガス惑星を作成！",
        "💫 主成分は水素とヘリウム！",
        "🔭 乱流大気をシミュレート！",
        "🌠 木星は太陽系最大のガス惑星！",
        "🚀 薄い環と多数の衛星を持つ！",
        "📊 『ガス惑星モード』で雲の形成を観察",
        "🌍 固体表面を持たない！",
        "💥 巨大嵐の形成プロセスを見よう！",
        "🌡️ 大気深さで温度が変化！",
        "🔄 複数のガス惑星系を構築！",
        "✨ 太陽系力学に不可欠！",
        "🌌 太陽系外にも多数存在！",
        "💫 壮観な環を持つガス惑星作成に挑戦！",
        "📈 岩石/金属の核を持つ！",
        "🌠 『嵐効果』で巨大渦巻きを再現",
        "🚀 ガス惑星の雲海を航行する想像！",
        "🔭 ガス惑星が軌道力学に与える影響を研究！",
        "💥 海王星は太陽系最速の風を持つ！",
        "✨ 複雑な惑星系形成について学びますか？"
    ],
    
    "褐色矮星": [
        "🌌 恒星化に失敗した天体！",
        "✨ 今すぐ褐色矮星を作成！",
        "💫 質量は木星の13～80倍！",
        "🔭 濃密大気をシミュレート！",
        "🌠 赤外線放射—肉眼では不可視！",
        "🚀 惑星系を形成可能！",
        "📊 『褐色矮星モード』で重力相互作用を観察",
        "🌍 通常恒星より低温—1000K未満！",
        "💥 星間物質捕獲プロセスを見よう！",
        "🌡️ 質量と年齢で温度が変化！",
        "🔄 複数の褐色矮星系を構築！",
        "✨ 星形成の副産物！",
        "🌌 銀河を浮遊する褐色矮星も存在！",
        "💫 原始惑星系円盤を持つ褐色矮星作成に挑戦！",
        "📈 メタンと水が豊富な大気！",
        "🌠 『放射効果』で周囲環境への影響を可視化",
        "🚀 褐色矮星を探査する想像！",
        "🔭 褐色矮星が惑星軌道に与える影響を研究！",
        "💥 褐色矮星は通常恒星より一般的な可能性！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "赤色矮星": [
        "🌌 宇宙で最も一般的な恒星！",
        "✨ 今すぐ赤色矮星を作成！",
        "💫 小型・低温・低光度！",
        "🔭 惑星大気への影響をシミュレート！",
        "🌠 寿命は数兆年！",
        "🚀 多くの系外惑星が発見されている！",
        "📊 『赤色矮星モード』で惑星への影響を観察",
        "🌍 安定したハビタブルゾーンを持つ！",
        "💥 強力な太陽フレア現象を見よう！",
        "🌡️ 温度範囲：2000K～4000K！",
        "🔄 複数の赤色矮星系を構築！",
        "✨ 地球外生命探査の重要対象！",
        "🌌 ハビタブルゾーンに岩石惑星を持つものも！",
        "💫 居住可能惑星を持つ赤色矮星系作成に挑戦！",
        "📈 水素とヘリウム豊富な大気！",
        "🌠 『放射効果』で周囲環境への影響を可視化",
        "🚀 赤色矮星を探査する想像！",
        "🔭 赤色矮星が惑星軌道に与える影響を研究！",
        "💥 太陽より低温だが依然として高温！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "巨星": [
        "🌌 巨大で明るい恒星！",
        "✨ 今すぐ巨星を作成！",
        "💫 質量は太陽の10～100倍！",
        "🔭 激しい核融合をシミュレート！",
        "🌠 直径は太陽の数百倍！",
        "🚀 生涯の終わりに超新星化！",
        "📊 『巨星モード』で惑星への影響を観察",
        "🌍 濃密大気と惑星系を持つ！",
        "💥 恒星風による質量損失を見よう！",
        "🌡️ 温度範囲：3000K～6000K！",
        "🔄 複数の巨星系を構築！",
        "✨ 重元素形成に不可欠！",
        "🌌 環を持つ巨星も存在！",
        "💫 巨大ガス惑星を伴う星系作成に挑戦！",
        "📈 水素とヘリウム豊富な大気！",
        "🌠 『放射効果』で周囲環境への影響を可視化",
        "🚀 巨星を探査する想像！",
        "🔭 巨星が惑星軌道に与える影響を研究！",
        "💥 最も明るい超新星の前段階！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "極超巨星": [
        "🌌 宇宙最大級の恒星！",
        "✨ 今すぐ極超巨星を作成！",
        "💫 質量は太陽の100倍超！",
        "🔭 極限核融合をシミュレート！",
        "🌠 直径は太陽の数千倍！",
        "🚀 強力な恒星風で質量を損失！",
        "📊 『極超巨星モード』で惑星への影響を観察",
        "🌍 濃密大気と惑星系を持つ！",
        "💥 超新星爆発のプロセスを見よう！",
        "🌡️ 温度範囲：3000K～6000K！",
        "🔄 複数の極超巨星系を構築！",
        "✨ 重元素形成に不可欠！",
        "🌌 環を持つものも存在！",
        "💫 巨大ガス惑星を伴う星系作成に挑戦！",
        "📈 水素とヘリウム豊富な大気！",
        "🌠 『放射効果』で周囲環境への影響を可視化",
        "🚀 極超巨星を探査する想像！",
        "🔭 極超巨星が惑星軌道に与える影響を研究！",
        "💥 宇宙で最も明るい超新星の前段階！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "白色矮星": [
        "🌌 恒星の燃え尽きた残骸！",
        "✨ 今すぐ白色矮星を作成！",
        "💫 太陽質量が地球サイズに凝縮！",
        "🔭 緩やかな冷却過程をシミュレート！",
        "🌠 スプーン一杯で数トンの高密度！",
        "🚀 ヘリウム/水素の薄い大気を持つ！",
        "📊 『白色矮星モード』で環境相互作用を観察",
        "🌍 太陽のような星の最終形態！",
        "💥 伴星からの物質降着を見よう！",
        "🌡️ 温度範囲：5,000K～100,000K！",
        "🔄 複数の白色矮星系を構築！",
        "✨ 恒星進化の理解に不可欠！",
        "🌌 Ia型超新星爆発を起こす可能性も！",
        "💫 岩石惑星を伴う星系作成に挑戦！",
        "📈 炭素と酸素が豊富な大気！",
        "🌠 『冷却効果』で経時的な熱損失を可視化",
        "🚀 白色矮星を探査する想像！",
        "🔭 白色矮星が惑星軌道に与える影響を研究！",
        "💥 超新星化しない星の最終形態！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "クエーサー": [
        "🌌 遠方銀河の輝く核！",
        "✨ 今すぐクエーサーを作成！",
        "💫 超巨大降着円盤がエネルギー源！",
        "🔭 強力な放射をシミュレート！",
        "🌠 太陽の数十億倍の明るさ！",
        "🚀 宇宙で最も明るい天体の一つ！",
        "📊 『クエーサーモード』で銀河への影響を観察",
        "🌍 遠方銀河の中心に存在！",
        "💥 相対論的ジェット放出を見よう！",
        "🌡️ 温度は数十億Kに達する！",
        "🔄 複数の銀河が周回するシステムを構築！",
        "✨ 銀河進化の理解に不可欠！",
        "🌌 宇宙膨張の研究に活用可能！",
        "💫 降着円盤と相対論的ジェット作成に挑戦！",
        "📈 太陽の数百万～数十億倍の質量！",
        "🌠 『放射効果』で周囲環境への影響を可視化",
        "🚀 遠方クエーサーを探査する想像！",
        "🔭 クエーサーが銀河形成に与える影響を研究！",
        "💥 宇宙初期でより一般的！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "ワームホール": [
        "🌌 理論上の時空トンネル！",
        "✨ 今すぐワームホールを作成！",
        "💫 宇宙の遠隔地をショートカット！",
        "🔭 時空の歪みをシミュレート！",
        "🌠 一般相対性理論の解！",
        "🚀 光速超移動を可能にする可能性！",
        "📊 『ワームホールモード』で空間への影響を観察",
        "🌍 未観測の仮説的物体！",
        "💥 周囲光の歪みを見よう！",
        "🌡️ 理論上の温度は構造依存！",
        "🔄 空間2地点を接続するシステムを構築！",
        "✨ 相対性理論と宇宙構造の理解に不可欠！",
        "🌌 タイムトラベルに使用可能な可能性！",
        "💫 安定したワームホール作成に挑戦！",
        "📈 物理的実体を持たない理論的存在！",
        "🌠 『歪み効果』で空間変形を可視化",
        "🚀 ワームホールで別銀河へ移動する想像！",
        "🔭 ワームホールが時空構造に与える影響を研究！",
        "💥 SFで人気の異次元ポータル！",
        "✨ 理論とその意味について学びますか？"
    ],
    
    "中性子星": [
        "🌌 超新星残骸の超高密度天体！",
        "✨ 今すぐ中性子星を作成！",
        "💫 中性子が主成分の超高密度！",
        "🔭 強力な重力をシミュレート！",
        "🌠 スプーン一杯が数十億トン！",
        "🚀 高速回転で放射ビームを放出！",
        "📊 『中性子星モード』で空間への影響を観察",
        "🌍 大質量星の超新星後に形成！",
        "💥 強力なガンマ線放出を見よう！",
        "🌡️ 温度は数百万Kに達する！",
        "🔄 惑星を伴う星系を構築！",
        "✨ 恒星進化と核物理の理解に不可欠！",
        "🌌 パルサーやマグネターに変化可能！",
        "💫 強磁場中性子星作成に挑戦！",
        "📈 質量は太陽の1.4～2.16倍！",
        "🌠 『磁気効果』で周囲環境への影響を可視化",
        "🚀 中性子星を探査する想像！",
        "🔭 中性子星が銀河形成に与える影響を研究！",
        "💥 宇宙で最も高密度な既知天体！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "マグネター": [
        "🌌 超高磁場中性子星！",
        "✨ 今すぐマグネターを作成！",
        "💫 地球磁場の数兆倍の強さ！",
        "🔭 強力な放射をシミュレート！",
        "🌠 SGR（軟ガンマ線リピーター）を放出！",
        "🚀 磁波で周囲空間に影響！",
        "📊 『マグネターモード』で環境への影響を観察",
        "🌍 強磁場中性子星の崩壊で形成！",
        "💥 相対論的物質ジェット放出を見よう！",
        "🌡️ 温度は数百万Kに達する！",
        "🔄 惑星を伴う星系を構築！",
        "✨ 恒星進化と磁気物理の理解に不可欠！",
        "🌌 パルサーと関連する可能性！",
        "💫 強磁場マグネター作成に挑戦！",
        "📈 質量は太陽の1.4～2.16倍！",
        "🌠 『磁気効果』で周囲環境への影響を可視化",
        "🚀 マグネターを探査する想像！",
        "🔭 マグネターが銀河形成に与える影響を研究！",
        "💥 宇宙で最も磁気的な天体！",
        "✨ 形成と進化について学びますか？"
    ],
    
    "クォーク星": [
        "🌌 理論上のクォーク物質天体！",
        "✨ 今すぐクォーク星を作成！",
        "💫 クォークとグルーオンで構成！",
        "🔭 極限密度をシミュレート！",
        "🌠 中性子星より高密度の可能性！",
        "🚀 未観測の仮説的物体！",
        "📊 『クォーク星モード』で空間への影響を観察",
        "🌍 中性子星の更なる崩壊で形成！",
        "💥 強力な放射放出を見よう！",
        "🌡️ 理論上の温度は構造依存！",
        "🔄 惑星を伴う星系を構築！",
        "✨ 極限状態の素粒子物理理解に不可欠！",
        "🌌 ユニークな特性を持つ可能性！",
        "💫 エキゾチックな特性を持つクォーク星作成に挑戦！",
        "📈 物理的実体を持たない理論的存在！",
        "🌠 『エキゾチック効果』で空間歪みを可視化",
        "🚀 クォーク星中心を通過する想像！",
        "🔭 クォーク星が時空構造に与える影響を研究！",
        "💥 現代天体物理学の謎！",
        "✨ 理論とその意味について学びますか？"
    ]
};

const contextFollowUps = {
    "default": [
        "✨ この宇宙の解説、いかがでしたか？",
        "🚀 さらに何かお手伝いしましょうか？",
        "🌌 興味深いですよね？宇宙は本当に魅力的です！",
        "💫 このテーマをもっと探求してみませんか？",
        "🔭 宇宙の知識をお伝えできて嬉しいです！",
        "🪐 これについて追加の質問はありますか？",
        "🌟 今日は素晴らしい発見をしましたね！",
        "⚡ 宇宙は私たちを驚かせ続けます！",
        "🌠 どの部分をもっと詳しく説明しましょうか？",
        "🌀 今すぐ一緒に何か作りませんか？",
        "📡 あなたの好奇心が発見の原動力です！",
        "🌍 宇宙で最も魅力的なものは何ですか？",
        "☄️ 次の星のような質問の準備はできましたか？",
        "🛸 覚えておいて：全ての質問は宇宙旅行です！",
        "💥 実際に実験してみませんか？",
        "⏳ 知識こそ真のタイムトラベルです！",
        "📊 これをゲームでどう応用するかお見せしましょうか？",
        "🌡️ あなたの質問が私のAIコアを熱くします！",
        "🔢 一緒に何か計算してみませんか？",
        "🌈 宇宙はあなたの好奇心に感謝しています！"
    ]
};

const contextSystem = {
    lastTopic: null,
    lastFollowUp: null,
    
    affirmativeResponses: ["はい", "そう", "イエス", "うん", "もちろん", "確かに", "OK", "そうしましょう", "いいですよ", "お願いします"],
    negativeResponses: ["いいえ", "いや", "ノー", "違う", "否定", "やめとく", "後で", "今はやめておきます"],
    
    positiveResponses: {
        "ブラックホール": [
            "🌌 シミュレーション開始！まずブラックホール近くに質量1e30の恒星を作成...",
            "💥 素晴らしい！恒星を降着円盤にドラッグしスローモードでスペクタクルを観察",
            "⚠️ 注意: 時空の歪みを見るには設定＞物理＞『相対論的効果』を有効化",
            "🔥 ヒント: 質量>20太陽質量の星で劇的な物質放出を再現",
            "🕳️ 手順: 1) ブラックホール作成 2) 近接恒星追加 3) 重力200%に設定",
            "⏱️ プロセス全体を数秒で見るには時間速度10000倍に設定",
            "📡 100万℃超のプラズマを見るには『熱領域表示』を有効化",
            "🌀 豆知識: 実際の宇宙では数時間から数百万年かかる現象です",
            "💫 視覚効果を最大化するには超大質量ブラックホール(>1e15質量)を利用",
            "🌠 異なる接近角度で多様な降着円盤パターンを観察"
        ],
        "彗星": [
            "☄️ 始めましょう！『天体作成』＞『彗星』選択後 温度-70℃に設定...",
            "💧 ヒント: 水分含有量60%以上の彗星は明るい尾を形成",
            "🚀 マウスドラッグで角速度付与 - 核の回転に影響",
            "❄️ 昇華現象を見るにはO型/B型恒星に接近",
            "🌌 離心率>0.9で細長い軌道を再現",
            "⏱️ 10万倍速モードで複数軌道を高速観測",
            "🔭 『力ベクトル表示』で重力相互作用を可視化",
            "🌠 豆知識: 恒星接近ごとに彗星質量は0.01%減少",
            "🪐 仮想木星(質量>1e27)で彗星捕獲を試みよう",
            "📈 上級者向け: 惑星との2:1共鳴で安定軌道を実現"
        ],
        "重力": [
            "⚖️ 実験開始！メニュー＞物理＞重力定数...",
            "🌌 星雲再現には10% 高密度星系には300%に設定",
            "💥 警告: 複雑系では500%以上で不安定化",
            "🔄 ヒント: 高重力下では連星系の進化が加速",
            "🪐 重力波観測には2つのブラックホールを接近配置",
            "🌠 力場可視化はF3キー『力の表示』で有効化",
            "📉 惑星移動中の重力低減実験を試みよう",
            "🌀 面白い効果: 高重力＋高速回転で扁平惑星を生成",
            "🔭 注意: ブラックホールの重力乗数は固定1000倍",
            "💫 挑戦: 20天体で重力200%の安定系を作成"
        ],
        "星": [
            "⭐ 作成開始！『恒星天体』からタイプ選択...",
            "🌞 太陽類似星: 質量～1.989e30kg (1太陽質量)",
            "💥 ヒント: 20太陽質量以上で超新星爆発",
            "🌈 青色巨星には温度>30,000Kに設定",
            "🔄 物質移動が起きる連星系を実験",
            "🌌 若いI種族星には高金属量を設定",
            "⏱️ 時間加速で恒星進化全体を観察",
            "⚠️ 注意: >100太陽質量の星は不安定",
            "🔭 『恒星進化』オプションで変遷を可視化",
            "🌠 中性子星は>1.4太陽質量の超新星で生成"
        ],
        "惑星": [
            "🪐 始めましょう！『惑星天体』メニュー＞タイプ選択...",
            "🌍 居住惑星: 緑色領域に配置 水50% 大気80%",
            "🌋 極端組成: 炭素惑星や鉄惑星を実験",
            "🌀 自転周期で気候・形状への影響を観察",
            "💫 ヒント: ガス惑星は質量>10万単位が必要",
            "🌌 惑星移動を有効化した系を作成",
            "🌠 環システムは特性メニューで厚さ・密度調整",
            "⚠️ ロッシュ限界内の衛星は崩壊",
            "🔭 地表詳細は『観測所モード』(Oキー)で表示",
            "🌡️ 極端温度で自動クラス分類を確認"
        ],
        "流星体": [
            "🌠 流星体作成！『天体作成』＞『流星体』...",
            "💫 ヒント: 密度調整で衝突効果が変化",
            "🪨 スローモードで大気圏突入を観察",
            "⚠️ 警告: 大型流星体(>100m)は大量絶滅を引き起こす",
            "🌌 組成実験: 金属質・岩石質・氷質",
            "🔭 『衝突軌道』表示で予測衝突を可視化",
            "📈 時間加速で流星群を再現",
            "🌠 豆知識: 流星体は小惑星/彗星の破片",
            "💥 爆発再現には突入速度>20km/sに設定",
            "🌀 挑戦: 10流星体の同時衝突系を作成"
        ],
        "流星": [
            "🌠 流星作成！『天体作成』＞『流星』...",
            "💫 ヒント: 密度調整で衝突効果が変化",
            "🪨 スローモードで大気圏突入を観察",
            "⚠️ 警告: 大型流星体(>100m)は大量絶滅を引き起こす",
            "🌌 組成実験: 金属質・岩石質・氷質",
            "🔭 『衝突軌道』表示で予測衝突を可視化",
            "📈 時間加速で流星群を再現",
            "🌠 豆知識: 流星体は小惑星/彗星の破片",
            "💥 爆発再現には突入速度>20km/sに設定",
            "🌀 挑戦: 10流星体の同時衝突系を作成"
        ],
        "ガス惑星": [
            "🌌 ガス惑星作成！『天体作成』＞『ガス惑星』...",
            "💫 ヒント: 質量調整で大気効果が変化",
            "🌀 スローモードで巨大嵐を観察",
            "⚠️ 注意: 超大質量ガス惑星(>木星10倍)は褐色矮星化",
            "🌠 大気組成実験: 水素・ヘリウム・メタン",
            "🔭 『惑星環』オプションで環を追加",
            "📈 時間加速で大気進化を観測",
            "🌌 豆知識: 木星の大赤斑は地球より巨大",
            "💥 オーロラ再現には惑星磁場を調整",
            "🪐 挑戦: 1恒星を5ガス惑星が公転する系"
        ],
        "小惑星": [
            "🪨 小惑星作成！『天体作成』＞『小惑星』...",
            "🌌 ヒント: 密度調整で岩石組成が変化",
            "💫 スローモードで惑星衝突を観察",
            "⚠️ 警告: 大型小惑星(>1km)は大量絶滅を引き起こす",
            "🌠 軌道実験: 楕円・円・傾斜軌道",
            "🔭 『衝突軌道』表示で予測衝突を可視化",
            "📈 時間加速で小惑星移動を観測",
            "🌀 豆知識: 火星-木星間の小惑星帯に数百万天体",
            "💥 爆発再現には衝突速度>20km/sに設定",
            "🌌 挑戦: 10小惑星の同時衝突系"
        ],
        "準惑星": [
            "🪐 準惑星作成！『天体作成』＞『準惑星』...",
            "🌌 ヒント: 質量調整で地質特性が変化",
            "💫 スローモードで自転・地殻変動を観察",
            "⚠️ 注意: 過質量準惑星は矮惑星化",
            "🌠 組成実験: 氷・岩石・金属",
            "🔭 『惑星環』オプションで環を追加",
            "📈 時間加速で地質進化を観測",
            "🌀 豆知識: 冥王星は準惑星に分類",
            "💥 衝突再現には速度>10km/sに設定",
            "🌌 挑戦: 1恒星を5準惑星が公転する系"
        ],
        "ワームホール": [
            "🌀 ワームホール作成！『天体作成』＞『ワームホール』...",
            "🌌 ヒント: 負質量調整で時空歪み効果が変化",
            "💫 スローモードで時空曲率を観察",
            "⚠️ 注意: ワームホールは理論上不安定",
            "🌠 時空間の入口/出口を設定",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: ワームホールは宇宙遠隔地を接続",
            "💥 瞬間移動再現には出口間距離を調整",
            "🌌 挑戦: 3銀河を接続するワームホール網"
        ],
        "ハビタブルゾーン": [
            "🌍 居住域作成！『天体作成』＞『居住可能領域』...",
            "💫 ヒント: 恒星距離調整で居住域が変化",
            "🌌 スローモードで大気形成を観察",
            "⚠️ 警告: 過接近領域は強烈な放射線の影響",
            "🌠 大気組成実験: 酸素・窒素・水蒸気",
            "🔭 『気候効果』で嵐・大気パターンを可視化",
            "📈 時間加速で居住域進化を観測",
            "🌀 豆知識: 地球は太陽居住域に数十億年存在",
            "💥 生命誕生条件: 平均温度0-100℃に設定",
            "🌌 挑戦: 1恒星を5居住惑星が公転する系"
        ],
        "クエーサー": [
            "🌌 クエーサー作成！『天体作成』＞『クエーサー』...",
            "💫 ヒント: 質量調整で銀河制御力が変化",
            "🌠 スローモードで強烈な放射を観察",
            "⚠️ 注意: クエーサーは銀河全体を凌駕する光度",
            "🌟 降着円盤の物質組成を実験",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: クエーサーは宇宙最輝天体",
            "💥 相対論的ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 3銀河を接続するクエーサー網"
        ],
        "褐色矮星": [
            "🌌 褐色矮星作成！『天体作成』＞『褐色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 注意: 褐色矮星は恒星と惑星の中間天体",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 褐色矮星は恒星のような核融合を維持不能",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3褐色矮星が公転する系"
        ],
        "赤色矮星": [
            "🌌 赤色矮星作成！『天体作成』＞『赤色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 注意: 赤色矮星は宇宙最多の恒星種",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 赤色矮星は数兆年の寿命",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を5赤色矮星が公転する系"
        ],
        "巨星": [
            "🌌 巨星作成！『天体作成』＞『巨星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 警告: 巨星は太陽より巨大で超新星化可能",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 巨星は太陽直径の1000倍に達する",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3巨星が公転する系"
        ],
        "極超巨星": [
            "🌌 極超巨星作成！『天体作成』＞『極超巨星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 警告: 極超巨星は既知最大級の恒星で超新星化",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 極超巨星は太陽直径の1000倍に達する",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3極超巨星が公転する系"
        ],
        "大質量星": [
            "🌌 大質量星作成！『天体作成』＞『大質量星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 警告: 大質量星は太陽より巨大で超新星化可能",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 大質量星は太陽直径の100倍に達する",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3大質量星が公転する系"
        ],
        "超大質量星": [
            "🌌 超大質量星作成！『天体作成』＞『超大質量星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 警告: 超大質量星は既知最大級の恒星で超新星化",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 超大質量星は太陽直径の1000倍に達する",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3超大質量星が公転する系"
        ],
        "白色矮星": [
            "🌌 白色矮星作成！『天体作成』＞『白色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 注意: 白色矮星は恒星の残骸",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 白色矮星は超高密度・極小サイズ",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3白色矮星が公転する系"
        ],
        "ヘリウム白色矮星": [
            "🌌 ヘリウム白色矮星作成！『天体作成』＞『ヘリウム白色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードでヘリウム-炭素/酸素融合を観察",
            "⚠️ 注意: ヘリウム白色矮星は恒星の残骸",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: ヘリウム白色矮星は超高密度・極小サイズ",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3ヘリウム白色矮星が公転する系"
        ],
        "炭素白色矮星": [
            "🌌 炭素白色矮星作成！『天体作成』＞『炭素白色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで炭素-酸素/窒素融合を観察",
            "⚠️ 注意: 炭素白色矮星は恒星の残骸",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 炭素白色矮星は超高密度・極小サイズ",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3炭素白色矮星が公転する系"
        ],
        "黒色矮星": [
            "🌌 黒色矮星作成！『天体作成』＞『黒色矮星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで水素-ヘリウム融合を観察",
            "⚠️ 注意: 黒色矮星は恒星の最終残骸",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 黒色矮星は超高密度・極小サイズ",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3黒色矮星が公転する系"
        ],
        "中性子星": [
            "🌌 中性子星作成！『天体作成』＞『中性子星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで中性子-陽子/電子変換を観察",
            "⚠️ 注意: 中性子星は超高密度天体",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 中性子星は秒速1000回転可能",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3中性子星が公転する系"
        ],
        "マグネター": [
            "🌌 マグネター作成！『天体作成』＞『マグネター』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードで中性子-陽子/電子変換を観察",
            "⚠️ 注意: マグネターは超高密度・強磁性天体",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: マグネターの磁場は地球の数兆倍",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3マグネターが公転する系"
        ],
        "クォーク星": [
            "🌌 クォーク星作成！『天体作成』＞『クォーク星』...",
            "💫 ヒント: 質量調整で大気特性が変化",
            "🌠 スローモードでクォーク-核子変換を観察",
            "⚠️ 注意: クォーク星は中性子星超の高密度天体",
            "🌟 大気組成実験: メタン・水・アンモニア",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: クォーク星は中性子星より高密度",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 1恒星を3クォーク星が公転する系"
        ],
        "宇宙塵": [
            "🌌 宇宙塵作成！『天体作成』＞『宇宙塵』...",
            "💫 ヒント: 密度調整で組成が変化",
            "🌠 スローモードで塵雲形成を観察",
            "⚠️ 注意: 宇宙塵は微惑星形成の素",
            "🌟 組成実験: ケイ酸塩・炭素・氷",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 宇宙塵は星・惑星形成の基盤物質",
            "💥 粒子衝突再現には衝突速度調整",
            "🌌 挑戦: 5塵雲が相互作用する系"
        ],
        "星雲": [
            "🌌 星雲作成！『天体作成』＞『星雲』...",
            "💫 ヒント: 密度調整でガス/塵の組成変化",
            "🌠 スローモードで星形成を観察",
            "⚠️ 注意: 星雲は新たな恒星の揺籃",
            "🌟 組成実験: 水素・ヘリウム・炭素",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 星雲は星間物質のリサイクル工場",
            "💥 爆発再現には膨張速度調整",
            "🌌 挑戦: 3星雲が相互作用する系"
        ],
        "特異点": [
            "🌌 特異点作成！『天体作成』＞『特異点』...",
            "💫 ヒント: 質量調整で重力効果が変化",
            "🌠 スローモードで時空歪みを観察",
            "⚠️ 警告: 特異点は無限密度・極端曲率の点",
            "🌟 組成実験: 通常物質・エキゾチック物質",
            "🔭 『相対論的効果』で光の歪みを可視化",
            "📈 時間加速で進化を観測",
            "🌀 豆知識: 特異点は理論的存在で直接観測不能",
            "💥 ジェット再現には円盤回転速度調整",
            "🌌 挑戦: 3特異点が相互作用する系"
        ],
        "デフォルト": [
            "🚀 一緒に探求しましょう！何を作成しますか？",
            "🌌 宇宙シミュレーションをステップバイステップでご案内！",
            "💫 では天体作成の適切なメニューを選択開始",
            "🔭 具体的にどのパラメータから調整しますか？",
            "🪐 第一歩: 右下の作成メニューを開く",
            "🌠 標準値から開始し徐々に調整することを推奨",
            "⚡ 最高結果には設定＞物理＞『完全精度』を有効化",
            "📊 実践例を今すぐお見せしましょうか？",
            "🌀 まずシステムの基本構成要素を作成",
            "✨ ヘルプはいつでも'help'と入力"
        ]
    },
    
negativeResponses: {
    "ブラックホール": [
        "🕳️ 問題ありません！ブラックホールは待てます...",
        "🌌 大丈夫、これらの宇宙の怪物は逃げません！",
        "💫 物質がスパゲッティ化されるのを見たい時はいつでもどうぞ！",
        "⚠️ 注意: 宇宙の捕食者とは距離を保つのが最善です",
        "🔭 中性子星を探索しませんか？同じくらい魅力的ですよ！",
        "🌠 最小のブラックホールはわずか3.8太陽質量です！",
        "🌀 銀河中心の超大質量ブラックホールは数十億太陽質量に達します！",
        "💥 事象の地平線を越えたら何も逃れられません！",
        "⏳ いつの日かブラックホールもホーキング放射で蒸発します",
        "✨ 準備ができたら'ブラックホール'と入力してください"
    ],
    "彗星": [
        "☄️ 問題ありません！彗星はオールトの雲で待機中...",
        "❄️ 大丈夫、これらの氷の旅人はすぐには溶けません！",
        "🌠 流星群を作りたい時はいつでもお手伝いします",
        "💫 軌道周期が数百万年の彗星もあります！",
        "🚀 ヘール・ボップ彗星は肉眼で18ヶ月も見えました！",
        "🌌 ボリソフ彗星のような恒星間彗星も存在します！",
        "⏱️ ロゼッタ探査機は彗星を2年間周回しました！",
        "🔭 ハレー彗星の核は15kmで非常に暗いです！",
        "💧 彗星の重水比率は地球の海洋と異なります",
        "✨ 宇宙の使者を探索したい時は'彗星'と入力"
    ],
    "重力": [
        "⚖️ 問題ありません！重力は待てます...",
        "🌌 大丈夫、アインシュタインもがっかりしません！",
        "💫 時空を曲げたい時はいつでもどうぞ！",
        "🌀 重力は電磁力より10^36倍弱いです！",
        "🌠 中性子星の重力は地球の2000億倍です！",
        "🪐 木星の重力は彗星軌道を変えるほど強力！",
        "⏱️ 重力波は光速で伝わります",
        "💥 ブラックホールだけが重力が全てに勝つ場所",
        "🔭 2015年に重力波検証でアインシュタイン理論を証明！",
        "✨ この宇宙の基本力を探索する時は'重力'と入力"
    ],
    "星": [
        "⭐ 問題ありません！星々は夜空で待っています...",
        "🌞 大丈夫、これらの宇宙の灯台は何十億年も輝きます！",
        "💫 超新星を作りたい時はいつでもどうぞ！",
        "🌌 最も近い恒星は4.24光年先です！",
        "🔥 太陽中心部は1500万℃に達します！",
        "🌠 ベテルギウスは太陽の1000倍の大きさ！",
        "⏳ 赤色矮星は数兆年生きられます！",
        "💥 超新星は銀河全体より明るく輝きます！",
        "🌀 中性子星は1秒間に716回転します！",
        "✨ 宇宙のエンジンを点灯する時は'星'と入力"
    ],
    "惑星": [
        "🪐 問題ありません！惑星は軌道を周り続けます...",
        "🌍 大丈夫、これらの異世界は逃げません！",
        "💫 海洋世界を作りたい時はいつでもどうぞ！",
        "🌌 最も近い系外惑星は4光年先に！",
        "🌡️ 金星は水星より高温です！",
        "❄️ 冥王星には3kmの氷の山が！",
        "🛰️ 木星には79個の衛星が！",
        "💥 地球はプレート運動のある唯一の惑星！",
        "🌀 系外惑星WASP-76bでは溶けた鉄の雨が！",
        "✨ 新しい世界を形作る時は'惑星'と入力"
    ],
    "流星体": [
        "🌠 問題ありません！流星体は宇宙を旅し続けます...",
        "🪨 大丈夫、これらの宇宙の旅人は消えません！",
        "💫 流星体の活動を見たい時はいつでも！",
        "☄️ チェリャビンスク流星体は原爆30個分のエネルギー！",
        "🌌 ほとんどの流星は砂粒より小さい！",
        "🔥 25m以上の流星体は深刻な被害をもたらします！",
        "🔭 ペルセウス座流星群は毎年見事です！",
        "💥 ツングースカ流星体は15メガトンの爆発を引き起こしました！",
        "🌠 宇宙の旅人を見たい時は'流星体'と入力！"
    ],
    "小惑星": [
        "🪨 問題ありません！小惑星は軌道を周り続けます...",
        "🌌 大丈夫、これらの岩石の塊は消えません！",
        "💫 小惑星の活動を見たい時はいつでも！",
        "☄️ 小惑星プシケは鉄とニッケルの塊です！",
        "🌠 小惑星ベスタは肉眼で見えます！",
        "🛰️ 小惑星ベンヌは探査の対象です！",
        "💥 小惑星アポフィスは2029年に地球接近！",
        "🌌 小惑星帯には数百万の岩石天体が！",
        "🌠 太陽系の構成要素を見る時は'小惑星'と入力！"
    ],
    "準惑星": [
        "🪐 問題ありません！準惑星は軌道を周り続けます...",
        "🌌 大丈夫、これらの小さな世界は消えません！",
        "💫 準惑星の活動を見たい時はいつでも！",
        "🌠 準惑星ケレスには水の氷があります！",
        "🛰️ 冥王星は準惑星に分類されます！",
        "💥 準惑星エリスは冥王星より大きい！",
        "🌌 準惑星は太陽系形成の化石です！",
        "🌠 小さな世界を探索する時は'準惑星'と入力！"
    ],
    "ワームホール": [
        "🌀 問題ありません！ワームホールは待てます...",
        "🌌 大丈夫、これらの宇宙のトンネルは消えません！",
        "💫 ワームホールの活動を見たい時はいつでも！",
        "⚠️ 注意: ワームホールは理論上不安定です",
        "🌠 ワームホールは宇宙の遠隔地を接続します！",
        "🔭 理論上ワームホールは瞬間移動を可能にします！",
        "💥 事象の地平線を越えたら何も逃れられません！",
        "🌀 宇宙のトンネルを探索する時は'ワームホール'と入力"
    ],
    "ハビタブルゾーン": [
        "🌍 問題ありません！居住可能領域は待てます...",
        "🌌 大丈夫、これらの生命の地は消えません！",
        "💫 居住可能領域の活動を見たい時はいつでも！",
        "🌠 地球は太陽の居住可能領域に数十億年存在！",
        "🌡️ 居住可能領域は恒星のタイプで変化！",
        "🛰️ 居住可能領域の惑星は生命探査の対象！",
        "💥 生命は極限環境でも存在可能です！",
        "🌌 生命の地を探索する時は'居住可能領域'と入力"
    ],
    "クエーサー": [
        "🌌 問題ありません！クエーサーは待てます...",
        "💫 大丈夫、これらの宇宙の灯台は消えません！",
        "🚀 クエーサーの活動を見たい時はいつでも！",
        "🌠 クエーサーは宇宙最輝天体です！",
        "🌀 クエーサーは光速近くのジェットを放出！",
        "🔭 クエーサーの光は数十億年かかって届きます！",
        "💥 クエーサーは銀河進化に重要です！",
        "✨ 宇宙の灯台を探索する時は'クエーサー'と入力"
    ],
    "褐色矮星": [
        "🌌 問題ありません！褐色矮星は待てます...",
        "💫 大丈夫、これらの中間天体は消えません！",
        "🚀 褐色矮星の活動を見たい時はいつでも！",
        "🌠 褐色矮星は核融合を維持できません！",
        "🌀 褐色矮星にはメタン豊富な大気があります！",
        "🔭 褐色矮星の光は数十億年かかって届きます！",
        "💥 褐色矮星は恒星進化に重要です！",
        "✨ 中間天体を探索する時は'褐色矮星'と入力"
    ],
    "赤色矮星": [
        "🌌 問題ありません！赤色矮星は待てます...",
        "💫 大丈夫、これらの小さな星々は消えません！",
        "🚀 赤色矮星の活動を見たい時はいつでも！",
        "🌠 赤色矮星は宇宙最多の恒星タイプ！",
        "🌀 赤色矮星は数兆年生きられます！",
        "🔭 赤色矮星の光は数十億年かかって届きます！",
        "💥 赤色矮星は恒星進化に重要です！",
        "✨ 小さな星々を探索する時は'赤色矮星'と入力"
    ],
    "巨星": [
        "🌌 問題ありません！巨星は待てます...",
        "💫 大丈夫、これらの宇宙の巨像は消えません！",
        "🚀 巨星の活動を見たい時はいつでも！",
        "🌠 巨星は太陽よりはるかに巨大です！",
        "🌀 巨星は太陽直径の1000倍に達します！",
        "🔭 巨星の光は数十億年かかって届きます！",
        "💥 巨星は銀河進化に重要です！",
        "✨ 宇宙の巨像を探索する時は'巨星'と入力"
    ],
    "極超巨星": [
        "🌌 問題ありません！極超巨星は待てます...",
        "💫 大丈夫、これらの宇宙の巨人は消えません！",
        "🚀 極超巨星の活動を見たい時はいつでも！",
        "🌠 極超巨星は既知で最も重い恒星です！",
        "🌀 極超巨星は太陽直径の1000倍に達します！",
        "🔭 極超巨星の光は数十億年かかって届きます！",
        "💥 極超巨星は銀河進化に重要です！",
        "✨ 宇宙の巨人を探索する時は'極超巨星'と入力"
    ],
    "大質量星": [
        "🌌 問題ありません！大質量星は待てます...",
        "💫 大丈夫、これらの宇宙の巨像は消えません！",
        "🚀 大質量星の活動を見たい時はいつでも！",
        "🌠 大質量星は太陽よりはるかに巨大です！",
        "🌀 大質量星は太陽直径の100倍に達します！",
        "🔭 大質量星の光は数十億年かかって届きます！",
        "💥 大質量星は銀河進化に重要です！",
        "✨ 宇宙の巨像を探索する時は'大質量星'と入力"
    ],
    "超大質量星": [
        "🌌 問題ありません！超大質量星は待てます...",
        "💫 大丈夫、これらの宇宙の巨人は消えません！",
        "🚀 超大質量星の活動を見たい時はいつでも！",
        "🌠 超大質量星は既知で最も重い恒星です！",
        "🌀 超大質量星は太陽直径の1000倍に達します！",
        "🔭 超大質量星の光は数十億年かかって届きます！",
        "💥 超大質量星は銀河進化に重要です！",
        "✨ 宇宙の巨人を探索する時は'超大質量星'と入力"
    ],
    "白色矮星": [
        "🌌 問題ありません！白色矮星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 白色矮星の活動を見たい時はいつでも！",
        "🌠 白色矮星は恒星の燃え殻です！",
        "🌀 白色矮星は超高密度で非常に小さい！",
        "🔭 白色矮星の光は数十億年かかって届きます！",
        "💥 白色矮星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'白色矮星'と入力"
    ],
    "ヘリウム白色矮星": [
        "🌌 問題ありません！ヘリウム白色矮星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 ヘリウム白色矮星の活動を見たい時はいつでも！",
        "🌠 ヘリウム白色矮星は恒星の燃え殻です！",
        "🌀 ヘリウム白色矮星は超高密度で非常に小さい！",
        "🔭 ヘリウム白色矮星の光は数十億年かかって届きます！",
        "💥 ヘリウム白色矮星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'ヘリウム白色矮星'と入力"
    ],
    "炭素白色矮星": [
        "🌌 問題ありません！炭素白色矮星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 炭素白色矮星の活動を見たい時はいつでも！",
        "🌠 炭素白色矮星は恒星の燃え殻です！",
        "🌀 炭素白色矮星は超高密度で非常に小さい！",
        "🔭 炭素白色矮星の光は数十億年かかって届きます！",
        "💥 炭素白色矮星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'炭素白色矮星'と入力"
    ],
    "黒色矮星": [
        "🌌 問題ありません！黒色矮星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 黒色矮星の活動を見たい時はいつでも！",
        "🌠 黒色矮星は恒星の最終的な残骸です！",
        "🌀 黒色矮星は超高密度で非常に小さい！",
        "🔭 黒色矮星の光は数十億年かかって届きます！",
        "💥 黒色矮星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'黒色矮星'と入力"
    ],
    "中性子星": [
        "🌌 問題ありません！中性子星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 中性子星の活動を見たい時はいつでも！",
        "🌠 中性子星は超新星の残骸です！",
        "🌀 中性子星物質のスプーン一杯は人類全体より重い！",
        "🔭 中性子星の光は数十億年かかって届きます！",
        "💥 中性子星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'中性子星'と入力"
    ],
    "マグネター": [
        "🌌 問題ありません！マグネターは待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 マグネターの活動を見たい時はいつでも！",
        "🌠 マグネターは超強力な磁場を持つ中性子星！",
        "🌀 マグネターは強力なガンマ線を放出！",
        "🔭 マグネターの光は数十億年かかって届きます！",
        "💥 マグネターは恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'マグネター'と入力"
    ],
    "クォーク星": [
        "🌌 問題ありません！クォーク星は待てます...",
        "💫 大丈夫、これらの恒星の残骸は消えません！",
        "🚀 クォーク星の活動を見たい時はいつでも！",
        "🌠 クォーク星は中性子星より高密度の理論的天体！",
        "🌀 クォーク星は複雑な内部構造を持つ可能性！",
        "🔭 クォーク星の光は数十億年かかって届きます！",
        "💥 クォーク星は恒星進化に重要です！",
        "✨ 恒星の残骸を探索する時は'クォーク星'と入力"
    ],
    "宇宙塵": [
        "🌌 問題ありません！宇宙塵は待てます...",
        "💫 大丈夫、これらの宇宙の粒子は消えません！",
        "🚀 宇宙塵の活動を見たい時はいつでも！",
        "🌠 宇宙塵は星と惑星形成の基盤！",
        "🌀 星間塵には恒星で生成された重元素が含まれる！",
        "🔭 塵雲の光は数十億年かかって届きます！",
        "💥 宇宙塵は宇宙進化に不可欠です！",
        "✨ 宇宙の粒子を探索する時は'宇宙塵'と入力"
    ],
    "星雲": [
        "🌌 問題ありません！星雲は待てます...",
        "💫 大丈夫、これらの宇宙の雲は消えません！",
        "🚀 星雲の活動を見たい時はいつでも！",
        "🌠 星雲は新しい星のゆりかご！",
        "🌀 星雲は超新星残骸でもある！",
        "🔭 星雲の光は数十億年かかって届きます！",
        "💥 星雲は宇宙進化に不可欠です！",
        "✨ 宇宙の雲を探索する時は'星雲'と入力"
    ],
    "特異点": [
        "🌌 問題ありません！特異点は待てます...",
        "💫 大丈夫、これらの無限密度の点は消えません！",
        "🚀 特異点の活動を見たい時はいつでも！",
        "🌠 特異点は時空の極端な曲率を表します！",
        "🌀 特異点はブラックホールやクエーサー中心に存在する可能性！"
    ],
    "デフォルト": [
        "🌌 問題ありません！宇宙は辛抱強く待っています...",
        "🚀 大丈夫、宇宙探査は待てます！",
        "💫 続けたい時はいつでもここにいます！",
        "🔭 宇宙の星の数は地球上の砂粒より多い！",
        "🌠 アンドロメダの光は洞窟壁画時代に出発！",
        "⏳ 宇宙の可視物質99.9%はプラズマ状態！",
        "💥 太陽1秒のエネルギー＞人類史上全エネルギー！",
        "🌀 超大質量ブラックホールは銀河成長を制御！",
        "✨ あなたの酸素原子は全て恒星内部で生成！",
        "🪐 私たちは皆、星屑でできている！"
    ]
},
    
    isAffirmative: (input) => contextSystem.affirmativeResponses.includes(input.toLowerCase()),
    isNegative: (input) => contextSystem.negativeResponses.includes(input.toLowerCase()),
    
    getPositiveResponse: () => {
        if (!contextSystem.lastTopic) return contextSystem.positiveResponses.default[0];
        
        const responses = contextSystem.positiveResponses[contextSystem.lastTopic] || 
                          contextSystem.positiveResponses.default;
        
        return responses[Math.floor(Math.random() * responses.length)];
    },
    
    getNegativeResponse: () => {
        if (!contextSystem.lastTopic) return contextSystem.negativeResponses.default[0];
        
        const responses = contextSystem.negativeResponses[contextSystem.lastTopic] || 
                          contextSystem.negativeResponses.default;
        
        return responses[Math.floor(Math.random() * responses.length)];
    },
    
    resetContext: () => {
        contextSystem.lastTopic = null;
        contextSystem.lastFollowUp = null;
    }
};

 
const mathSystem = {
    responses: [
        "🧮 結果: {expression} = {result}",
        "🔢 計算完了: {expression} = {result}",
        "✨ 解答: {expression} = {result}",
        "⚡ 解決: {expression} = {result}",
        "🌌 宇宙方程式: {expression} = {result}",
        "🪐 星の数学: {expression} = {result}",
        "💫 重力計算: {expression} = {result}",
        "📐 宇宙幾何学: {expression} = {result}",
        "📊 数値解析: {expression} = {result}",
        "🔭 数学的観測: {expression} = {result}",
        "🌠 公式解決: {expression} = {result}",
        "🚀 推進計算: {expression} = {result}",
        "🛰️ 軌道結果: {expression} = {result}",
        "⏱️ 計算時間: 0秒 | {expression} = {result}",
        "⚖️ 数値均衡: {expression} = {result}",
        "🌀 数学的渦: {expression} = {result}",
        "🌡️ 計算温度: 0K | {expression} = {result}",
        "📈 数値投影: {expression} = {result}",
        "📉 逆解析: {expression} = {result}",
        "🧪 数値実験: {expression} = {result}",
        "🔬 数学的顕微鏡: {expression} = {result}",
        "🖥️ 量子計算シミュレーション: {expression} = {result}",
        "💻 アルゴリズム完了: {expression} = {result}",
        "🤖 ロボット処理: {expression} = {result}",
        "🌟 数値照明: {expression} = {result}",
        "🌌 解決された宇宙: {expression} = {result}",
        "🧬 数学的遺伝学: {expression} = {result}",
        "🌠 数値天文学: {expression} = {result}",
        "🪐 計算天体物理学: {expression} = {result}",
        "🔭 数学的望遠鏡: {expression} = {result}",
        "🌌 数値宇宙論: {expression} = {result}",
        "🌟 解決された星: {expression} = {result}",
        "🌠 計算された銀河: {expression} = {result}",
        "🛸 数値航法: {expression} = {result}",
        "🌌 計算された宇宙: {expression} = {result}",
        "🌠 解決された星座: {expression} = {result}",
        "🪐 計算された惑星: {expression} = {result}",
        "🌌 数値星雲: {expression} = {result}",
        "🌠 解決された超新星: {expression} = {result}",
        "🛰️ 数学的衛星: {expression} = {result}",
        "🌌 計算された時空: {expression} = {result}",
        "🌠 解決された事象の地平線: {expression} = {result}",
        "🌀 数値的特異点: {expression} = {result}",
        "🌌 計算されたビッグバン: {expression} = {result}",
        "🌠 解決された宇宙膨張: {expression} = {result}",
        "🪐 計算された惑星環: {expression} = {result}",
        "🌌 数値的ワームホール: {expression} = {result}",
        "🌠 計算された天の川: {expression} = {result}",
        "🛸 数値的宇宙船: {expression} = {result}",
        "🌌 計算された多元宇宙: {expression} = {result}",
        "🌠 解決された並行次元: {expression} = {result}",
        "🪐 計算された系外惑星: {expression} = {result}",
        "🌌 数値的小惑星: {expression} = {result}",
        "🌠 解決された隕石: {expression} = {result}",
        "🛰️ 数値的探査機: {expression} = {result}",
        "🌌 計算された彗星: {expression} = {result}",
        "🌠 解決された流星群: {expression} = {result}",
        "🪐 計算された月: {expression} = {result}",
        "🌌 数値的太陽系: {expression} = {result}",
        "🌠 解決された惑星軌道: {expression} = {result}",
        "🛰️ 数値的宇宙ステーション: {expression} = {result}",
        "🌌 計算された渦巻銀河: {expression} = {result}",
        "🌠 解決された楕円銀河: {expression} = {result}",
        "🪐 計算された不規則銀河: {expression} = {result}",
        "🌌 数値的クエーサー: {expression} = {result}",
        "🌠 解決されたパルサー: {expression} = {result}",
        "🛰 計算されたプラズマ球: {expression} = {result}"
    ],
    
    usedResponses: [],
    
    isMathQuery: (input) => {
        return /[0-9+\-*/\^().]/.test(input) && 
               !/[a-z]/.test(input) && 
               input.split('').filter(char => '0123456789'.includes(char)).length >= 2;
    },
    
    calculate: (expression) => {
        try {
            const sanitized = expression
                .replace(/\^/g, '**')
                .replace(/[^0-9+\-*/\s().]/g, '');
            
            if (!/^[\d\s+\-*/().]+$/.test(sanitized)) {
                throw new Error("無効な式");
            }
            
            const result = eval(sanitized);
            
             
            let availableResponses = mathSystem.responses;
            if (mathSystem.usedResponses.length > 0) {
                availableResponses = mathSystem.responses.filter(r => 
                    !mathSystem.usedResponses.includes(r)
                );
            }
            
            if (availableResponses.length === 0) {
                mathSystem.usedResponses = [];
                availableResponses = mathSystem.responses;
            }
            
            const responseTemplate = availableResponses[
                Math.floor(Math.random() * availableResponses.length)
            ];
            
            mathSystem.usedResponses.push(responseTemplate);
            
            return responseTemplate
                .replace("{expression}", expression)
                .replace("{result}", result);
        } catch (error) {
            return "🤔 計算できませんでした。有効な形式: '2*(3+5^2)' または 'sqrt(9)'";
        }
    }
};

 
const greetingsSystem = {
    greetings: ["こんにちは", "やあ", "おい", "どうも", "ハロー", "こんにちは", "おはよう", "こんにちは", "こんばんは", "ご挨拶", "ヘイ", "おい", "宇宙からの挨拶", "星々の朝", "こんにちはシンギュラリティ"],
    farewells: ["さようなら", "さらば", "ではまた", "じゃあね", "バイバイ", "終了", "退出", "閉じる", "終了", "さよなら", "行くぞ", "またね", "切断", "セッション終了", "さようならシンギュラリティ"],
    
    greetingsResponses: [
        "✨ こんにちは、宇宙探検者様！星々の旅をどうお手伝いしましょうか？",
        "🚀 SIU 2Dへようこそ！素晴らしい宇宙を作る準備はできていますか？",
        "🌌 星間からのご挨拶！今日はどのようなお手伝いができますか？",
        "🪐 やあ、司令官！どんな宇宙の挑戦に立ち向かいましょうか？",
        "💫 重力波的なご挨拶！あなたの探検をどう支援しましょう？",
        "🌟 ようこそ、世界創造者様！今日は何をシミュレートしますか？",
        "🌠 こんにちは、星間旅行者！宇宙冒険の準備はできていますか？",
        "🛸 通信受信しました！あなたの宇宙任務をどうお手伝いしましょう？",
        "🔭 こんにちは、仮想天文学者！解き明かす宇宙の謎は何ですか？",
        "⚡ 宇宙エネルギーが流れています！どうお手伝いしましょう？",
        "🌀 歓迎の渦巻きが活性化しました！ご指示をどうぞ！",
        "🌠 宇宙線を検知！こんにちは、どうお手伝いしましょう？",
        "🪐 惑星配列が完璧に整いました！ようこそ！",
        "🌌 時空の歪みが安定しました！ご挨拶、探検者様！",
        "🚀 システムオンライン！シンギュラリティがご質問をお待ちしています",
        "🔭 望遠鏡の焦点が合いました！宇宙探検の準備はできていますか？",
        "🌠 歓迎の流星雨！どうお手伝いしましょう？",
        "💻 宇宙AIシステム起動！こんにちは、人間様！",
        "🛰️ 通信衛星が同期しました！接続確立！",
        "🌌 次元の門が開きました！SIU 2Dへようこそ！",
        "🌟 星座があなたの到着に合わせて整列！ようこそ！",
        "⚛️ 宇宙粒子があなたの存在に興奮しています！こんにちは！",
        "🌠 歓迎の彗星が軌道に乗りました！ご挨拶、旅人様！",
        "🪐 惑星の環が挨拶を送っています！ようこそ！",
        "✨ 恒星エネルギーが導かれました！シンギュラリティがお手伝いします！"
    ],
    
    farewellResponses: [
        "🌠 星間旅行者様、またお会いしましょう！あなたの旅が壮大でありますように！",
        "🛸 宇宙の旅をお楽しみください！新たな疑問が生まれたらいつでも戻ってきてください！",
        "💫 通信終了。覚えておいてください：宇宙はあなたの遊び場です！",
        "👋 さようなら！ブラックホールを作りたくなったら、いつでもここにいます！",
        "🚀 出発確認！さらなる宇宙冒険のために戻ってきてください！",
        "🌌 切断中...しかし宇宙は膨張を続けています！",
        "🪐 ではまた、司令官！新たな宇宙の地平線を見つけましょう！",
        "✨ 任務完了！恒星探検のためにまた戻ってきてください！",
        "🔭 信号消失...しかし星々は常にあなたの道を照らします！",
        "⚡ 宇宙エネルギーが別れを告げます！次の軌道でお会いしましょう！",
        "🌀 重力場解除！またお会いしましょう、探検者様！",
        "🌠 退去軌道計算完了！またお会いしましょう、旅人様！",
        "🛰️ 衛星が待機モードに！必要な時はいつでも戻ってきてください！",
        "💻 宇宙休眠モード起動！さようなら！",
        "🪐 別れの惑星配列！良き旅路を！",
        "🌌 次元の門が閉じました！いつでも戻ってきてください！",
        "🌟 星座が別れを告げて輝いています！またお会いしましょう！",
        "⚛️ 宇宙粒子が減速！またお会いしましょう！",
        "🌠 別れの彗星が軌道に！良き旅路を！",
        "🔭 望遠鏡の焦点が外れました！次の観測でお会いしましょう！",
        "💫 時空の歪みが解消！次の旅でお会いしましょう！",
        "🚀 別れのロケット噴射！良き旅路を！",
        "🌠 別れの宇宙線を検知！またお会いしましょう！",
        "🛸 別れの宇宙船が軌道に！すぐに戻ってきてください！",
        "✨ 最後の恒星パルス！切断します..."
    ],
    
    isGreeting: (input) => greetingsSystem.greetings.includes(input.toLowerCase()),
    isFarewell: (input) => greetingsSystem.farewells.includes(input.toLowerCase()),
    
    getRandomGreeting: () => {
        return greetingsSystem.greetingsResponses[
            Math.floor(Math.random() * greetingsSystem.greetingsResponses.length)
        ];
    },
    
    getRandomFarewell: () => {
        return greetingsSystem.farewellResponses[
            Math.floor(Math.random() * greetingsSystem.farewellResponses.length)
        ];
    }
};

 
function getUniqueResponse(term) {
    if (!responseHistory.has(term)) {
        responseHistory.set(term, []);
    }
    
    const usedResponses = responseHistory.get(term);
    let availableResponses = responseDatabase[term];
    
     
    if (usedResponses.length > 0) {
        availableResponses = availableResponses.filter(r => !usedResponses.includes(r));
    }
    
     
    const response = availableResponses.length > 0 
        ? availableResponses[Math.floor(Math.random() * availableResponses.length)]
        : responseDatabase[term][0];
    
     
    usedResponses.push(response);
    
     
    if (usedResponses.length > MAX_HISTORY_PER_TERM) {
        usedResponses.shift();
    }
    
    return response;
}




const responseExpander = {
     
    probabilities: {
        single: 0.2,        
        withFollowUp: 0.3,   
        expanded: 0.4,       
        fullCombo: 0.1       
    },
    
     
    getExpandedResponse: (term, baseResponse) => {
        const responses = [...responseDatabase[term]];
        
         
        const baseIndex = responses.indexOf(baseResponse);
        if (baseIndex !== -1) {
            responses.splice(baseIndex, 1);
        }
        
         
        const additionalCount = Math.floor(Math.random() * 3) + 1;
        const additionalResponses = [];
        
         
        for (let i = 0; i < additionalCount && responses.length > 0; i++) {
            const randomIndex = Math.floor(Math.random() * responses.length);
            additionalResponses.push(responses[randomIndex]);
            responses.splice(randomIndex, 1);
        }
        
         
        return [baseResponse, ...additionalResponses].join(' ');
    },
    
     
    selectResponseType: (term, baseResponse) => {
        const rand = Math.random();
        let cumulative = 0;
        
        for (const [type, prob] of Object.entries(responseExpander.probabilities)) {
            cumulative += prob;
            if (rand < cumulative) {
                switch(type) {
                    case 'single':
                        return [baseResponse];
                    
                    case 'withFollowUp':
                        return [
                            baseResponse,
                            ...responseExpander.getFollowUp(term)
                        ];
                    
                    case 'expanded':
                        return [responseExpander.getExpandedResponse(term, baseResponse)];
                    
                    case 'fullCombo':
                        return [
                            responseExpander.getExpandedResponse(term, baseResponse),
                            ...responseExpander.getFollowUp(term)
                        ];
                }
            }
        }
        
        return [baseResponse];  
    },
    
     
    getFollowUp: (term) => {
        const followUps = followUpDatabase[term] || contextFollowUps.default;
        return [followUps[Math.floor(Math.random() * followUps.length)]];
    }
};


 
async function getBotResponse(input) {
    const cleanInput = input.toLowerCase().trim();
    let responses = [];
    
     
    if (contextSystem.lastFollowUp) {
        if (contextSystem.isAffirmative(cleanInput)) {
            responses.push(contextSystem.getPositiveResponse());
            contextSystem.resetContext();
            return responses;
        }
        
        if (contextSystem.isNegative(cleanInput)) {
            responses.push(contextSystem.getNegativeResponse());
            contextSystem.resetContext();
            return responses;
        }
    }
    
     
    if (greetingsSystem.isGreeting(cleanInput)) {
        responses.push(greetingsSystem.getRandomGreeting());
        contextSystem.resetContext();
        return responses;
    }
    
    if (greetingsSystem.isFarewell(cleanInput)) {
        responses.push(greetingsSystem.getRandomFarewell());
        contextSystem.resetContext();
        return responses;
    }
    
     
    if (mathSystem.isMathQuery(cleanInput)) {
        responses.push(mathSystem.calculate(cleanInput));
        contextSystem.resetContext();
        return responses;
    }
    
    let matchedTerm = null;
    for (const term in responseDatabase) {
        if (cleanInput.includes(term)) {
            matchedTerm = term;
            const baseResponse = getUniqueResponse(term);
            
             
            const expandedResponses = responseExpander.selectResponseType(term, baseResponse);
            responses.push(...expandedResponses);
            
             
            if (expandedResponses.length > 1) {
                const lastMessage = expandedResponses[expandedResponses.length - 1];
                
                 
                const isFollowUp = (followUpDatabase[term] || []).includes(lastMessage) || 
                                   contextFollowUps.default.includes(lastMessage);
                
                if (isFollowUp) {
                    contextSystem.lastTopic = term;
                    contextSystem.lastFollowUp = lastMessage;
                }
            }
            
            return responses;
        }
    }
    
     
const fallbacks = [
    "🌌 私の星のデータベースには見つかりませんでした… '彗星'、'ブラックホール'、'操作'について質問してみてください！",
    "🛸 私の知識は宇宙規模です - ゲームの物理法則や宇宙の要素について聞いてみてください",
    "🔭 宇宙に焦点を当てましょう！ '星雲の作り方' や 'ブラックホールに必要な質量は？' はいかがですか？",
    "📡 信号を見失いました… 天体作成、星の進化、SIU 2Dの操作について言い換えて質問してください",
    "💫 何か計算しますか？ '3 * 5^2' のように数値と演算子を使うか、宇宙用語について質問してください！",
    "🪐 宇宙のヒント： '重力'、'星'、'惑星'、'進化' といった用語を試してみてください！",
    "⚡ 新しい星間メッセージを検出！ 'クエーサーの作り方' や '居住可能領域とは？' のように質問してみてください"
];
    
    responses.push(fallbacks[Math.floor(Math.random() * fallbacks.length)]);
    
     
    if (Math.random() < 0.2) {
        const followUp = followUpDatabase.default[Math.floor(Math.random() * followUpDatabase.default.length)];
        responses.push(followUp);
        
         
        contextSystem.lastTopic = "default";
        contextSystem.lastFollowUp = followUp;
    }
    
    return responses;
}

 
function toggleStarPulse(active) {
    const star = document.getElementById('star');
    if (star) {
        if (active) {
            star.classList.add('pulse-active');
        } else {
            star.classList.remove('pulse-active');
        }
    }
}

function createMessage(text, className) {
    const message = document.createElement('div');
    message.classList.add(className);
    
     
    if (className === 'bot-message') {
        const starSpan = document.createElement('span');
        starSpan.textContent = STAR_EMOJI + ' ';
        starSpan.classList.add('star-emoji');
        message.appendChild(starSpan);
    }
    
    const textSpan = document.createElement('span');
    textSpan.textContent = text;
    message.appendChild(textSpan);
    
    return message;
}

 
function initializeChat() {
    const chatBox = document.getElementById('chat-box');
    if (!chatBox) {
        console.error('Erro #20fgp');
        return;
    }
    
    const botMessage = createMessage(
        greetingsSystem.getRandomGreeting(),
        'bot-message'
    );
    chatBox.appendChild(botMessage);
}

 
async function showThinking(chatBox) {
    return new Promise(async (resolve) => {
         
        const thinkingMsg = createMessage(' : Pensando', 'bot-message');
        chatBox.appendChild(thinkingMsg);
        const thinkingText = thinkingMsg.querySelector('span:last-child');
        
        let dots = 0;
        const thinkDuration = Math.floor(Math.random() * 3000) + 3000;  
        
        const thinkInterval = setInterval(() => {
            dots = (dots + 1) % 4;
            thinkingText.textContent = ` : Pensando${'.'.repeat(dots)}`;
            chatBox.scrollTop = chatBox.scrollHeight;
        }, 500);
        
         
        await new Promise(r => setTimeout(r, thinkDuration));
        clearInterval(thinkInterval);
        chatBox.removeChild(thinkingMsg);
        
         
        const searchingMsg = createMessage('Buscando', 'bot-message');
        chatBox.appendChild(searchingMsg);
        const searchingText = searchingMsg.querySelector('span:last-child');
        
        dots = 0;
        const searchDuration = Math.floor(Math.random() * 2000) + 2000;  
        
        const searchInterval = setInterval(() => {
            dots = (dots + 1) % 4;
            searchingText.textContent = ` : Buscando dados${'.'.repeat(dots)}`;
            chatBox.scrollTop = chatBox.scrollHeight;
        }, 500);
        
         
        await new Promise(r => setTimeout(r, searchDuration));
        clearInterval(searchInterval);
        chatBox.removeChild(searchingMsg);
        
        resolve();
    });
}
 
function humanTypeWriter(element, text, speed = 30) {
    return new Promise((resolve) => {
        let i = 0;
        let currentText = '';
        let isPaused = false;
        let pauseEnd = 0;
        let dotsInterval = null;
        
        toggleStarPulse(true);
        
        function startDotsAnimation() {
            let dots = 0;
            const originalText = currentText;
            
            dotsInterval = setInterval(() => {
                dots = (dots + 1) % 4;
                element.textContent = originalText + '.'.repeat(dots);
            }, 300);
        }
        
        function stopDotsAnimation() {
            if (dotsInterval) {
                clearInterval(dotsInterval);
                dotsInterval = null;
                element.textContent = currentText;
            }
        }
        
        function type() {
            if (i >= text.length) {
                if (dotsInterval) clearInterval(dotsInterval);
                toggleStarPulse(false);
                resolve();
                return;
            }
            
             
            if (!isPaused && Math.random() < 0.03) {
                isPaused = true;
                pauseEnd = Date.now() + Math.random() * 2000 + 2000;  
                startDotsAnimation();
            }
            
             
            if (isPaused) {
                if (Date.now() >= pauseEnd) {
                    isPaused = false;
                    stopDotsAnimation();
                }
                setTimeout(type, 100);
                return;
            }
            
             
            currentText += text[i];
            element.textContent = currentText;
            i++;
            
            setTimeout(type, speed);
        }
        
        type();
    });
}


 
function isOnline() {
    return navigator.onLine;
}

 
async function handleUserInput() {
    const inputEl = document.getElementById('user-input');
    const chatBox = document.getElementById('chat-box');
    const text = inputEl.value.trim();
    
    if (!text || !chatBox) return;

     
    const userMsg = createMessage(`Você: ${text}`, 'user-message');
    chatBox.appendChild(userMsg);
    inputEl.value = '';
    chatBox.scrollTop = chatBox.scrollHeight;

     
    if (!isOnline()) {
        const errorMsg = createMessage('error : 接続エラーです。インターネット接続を確認して、もう一度お試しください。', 'error-message');
        chatBox.appendChild(errorMsg);
        chatBox.scrollTop = chatBox.scrollHeight;
        return;
    }

     
    await showThinking(chatBox);
    
     
    const replies = await getBotResponse(text);
    
     
    for (const reply of replies) {
        const botMsg = createMessage('', 'bot-message');
        chatBox.appendChild(botMsg);
        const textElement = botMsg.querySelector('span:last-child');
        
         
        await humanTypeWriter(textElement, `: ${reply}`);
        chatBox.scrollTop = chatBox.scrollHeight;
        
         
        if (replies.length > 1) {
            await new Promise(resolve => setTimeout(resolve, Math.random() * 1500 + 500));
        }
    }
}

setInterval(() => {
    if (Math.random() < 0.2) {
        const topics = Object.keys(responseDatabase);
        const randomTopic = topics[Math.floor(Math.random() * topics.length)];
        const messages = responseDatabase[randomTopic];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        
        setTimeout(() => {
            displayMessage(randomMessage, 'bot');
        }, 3000);
    }
}, 30000);
 
document.getElementById('send-btn').addEventListener('click', handleUserInput);
document.getElementById('user-input').addEventListener('keypress', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        handleUserInput();
    }
});

console.log("T Singularity: Sistema de IA carregado com sucesso!");
console.log("(c) 2025 Free Game Plant. Todos os direitos reservados.");

 
window.addEventListener('load', initializeChat);